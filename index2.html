<!DOCTYPE html>

<html lang="zh-Hans">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta
      content="cwhRpNH2oKZP4aBB7zr2y-Ps-ev69SnzIa-cy7Ai6qg"
      name="google-site-verification"
    />
    <title>
      4Q Mirror PlayLab Registration | Parent-Child Growth Camp Malaysia
    </title>
    <meta
      name="description"
      content="Register for 4Q Mirror PlayLab Parent-Child Growth Camp. Strengthen family bonds, improve communication, and grow together. Open to parents and children, with sessions across Malaysia. Secure your spot and discover exclusive offers!"
    />
    <meta
      name="keywords"
      content="4Q Mirror PlayLab, parent-child camp, family growth, communication, Malaysia, parenting, registration, family education, activities, special offers, Stripe payment"
    />
    <meta content="index, follow" name="robots" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --brand-a: #7c3aed;
        --brand-b: #06b6d4;
        --brand-c: #fb923c;
      }
      html {
        scroll-behavior: smooth;
      }
      body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        font-family: Inter, ui-sans-serif, system-ui, Segoe UI, Roboto,
          Apple Color Emoji, Segoe UI Emoji;
      }
      #page-progress {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: transparent;
        z-index: 60;
      }
      #page-progress .bar {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #a78bfa, #06b6d4, #fb923c);
        transition: width 0.15s linear;
      }
      @media (prefers-reduced-motion: reduce) {
        #page-progress .bar {
          transition: none;
        }
      }
      .section-pad {
        padding-block: 5rem;
      }
      @media (min-width: 768px) {
        .section-pad {
          padding-block: 6.5rem;
        }
      }
      .readable {
        max-width: 70ch;
      }
      .balance {
        text-wrap: balance;
      }
      .leading-relaxed-2 {
        line-height: 1.9;
      }
      .soft-shadow {
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08);
      }
      .glass {
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.25);
      }
      .reveal {
        opacity: 0;
        transform: translateY(10px);
        transition: opacity 0.45s ease, transform 0.45s ease;
      }
      .reveal.visible {
        opacity: 1;
        transform: none;
      }
      /* Chan Fong card hover/focus polish */
      #chanfong-img {
        transition: transform 0.35s ease;
      }
      #chanfong-tilt {
        outline: none;
      }
      #chanfong-tilt:hover #chanfong-img {
        transform: scale(1.03);
      }
      #chanfong-tilt:focus-visible {
        box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.45),
          0 0 0 8px rgba(124, 58, 237, 0.12),
          0 18px 40px -12px rgba(0, 0, 0, 0.35);
      }
      #chanfong-tilt:focus-visible #chanfong-img {
        transform: scale(1.03);
      }
      /* Dr. Elaine card hover/focus polish */
      #elaine-img {
        transition: transform 0.35s ease;
      }
      #elaine-tilt {
        outline: none;
      }
      #elaine-tilt:hover #elaine-img {
        transform: scale(1.03);
      }
      #elaine-tilt:focus-visible {
        box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.45),
          0 0 0 8px rgba(124, 58, 237, 0.12),
          0 18px 40px -12px rgba(0, 0, 0, 0.35);
      }
      #elaine-tilt:focus-visible #elaine-img {
        transform: scale(1.03);
      }
      /* Chan Fong list: modern, tidy two-column with neutral bullets */
      #chanfong-list {
        list-style: none;
        margin: 0;
        padding: 0;
        display: grid;
        grid-template-columns: 1fr;
        row-gap: 0.55rem;
        column-gap: 2rem;
      }
      @media (min-width: 768px) {
        #chanfong-list {
          grid-template-columns: repeat(2, minmax(0, 1fr));
          row-gap: 0.7rem;
          column-gap: 2.5rem;
        }
      }
      #chanfong-list li {
        position: relative;
        padding-left: 1rem;
        line-height: 1.9;
        border-radius: 0.5rem;
        transition: background-color 0.18s ease;
      }
      #chanfong-list li::before {
        content: "";
        position: absolute;
        left: 0.2rem;
        top: 1.05em;
        width: 0.35rem;
        height: 0.35rem;
        border-radius: 999px;
        background: #9ca3af;
        transform: translateY(-50%);
      }
      #chanfong-list li:hover {
        background: rgba(0, 0, 0, 0.035);
      }
      /* Chan Fong title prominence */
      #chanfong-title {
        position: relative;
        display: inline-block;
        font-weight: 900;
        letter-spacing: 0.2px;
        background: linear-gradient(90deg, #7c3aed 0%, #06b6d4 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }
      #chanfong-title::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: -6px;
        height: 4px;
        width: 68px;
        border-radius: 999px;
        background: linear-gradient(
          90deg,
          rgba(124, 58, 237, 0.35),
          rgba(6, 182, 212, 0.35)
        );
      }
      .card {
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: 1.25rem;
        background: #fff;
        padding: 1.25rem;
      }
      .card-lg {
        padding: 1.75rem;
      }
      .badge {
        display: inline-flex;
        align-items: center;
        font-weight: 600;
        border-radius: 999px;
        padding: 0.4rem 0.85rem;
        background: rgba(6, 182, 212, 0.12);
        color: #0f766e;
        border: 1px solid rgba(6, 182, 212, 0.18);
      }
      .btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        border-radius: 999px;
        padding: 0.9rem 1.25rem;
        font-weight: 700;
      }
      .btn--primary {
        background: var(--brand-c);
        color: #fff;
      }
      .btn--primary:hover {
        filter: brightness(0.95);
      }
      .btn--light {
        background: #fff;
        color: #111;
        border: 1px solid rgba(0, 0, 0, 0.08);
      }
      .btn--light:hover {
        background: #fafafa;
      }
      .table {
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: 1rem;
        overflow: hidden;
      }
      .table thead {
        background: #fafafa;
      }
      .table th,
      .table td {
        padding: 1rem;
        vertical-align: top;
      }
      .hero {
        background: radial-gradient(
            1200px 600px at -10% -10%,
            rgba(255, 255, 255, 0.08),
            transparent 40%
          ),
          linear-gradient(120deg, var(--brand-a), #6d28d9 35%, #0891b2);
      }
      /* Hero refinements */
      .hero-gradient-overlay {
        position: absolute;
        inset: 0;
        background: radial-gradient(
            circle at 60% 20%,
            rgba(41, 183, 199, 0.45) 0%,
            rgba(41, 183, 199, 0.15) 50%,
            transparent 80%
          ),
          radial-gradient(
            circle at 10% 90%,
            rgba(86, 64, 153, 0.6) 0%,
            rgba(86, 64, 153, 0.18) 60%,
            transparent 90%
          ),
          linear-gradient(
            140deg,
            #29b7c7 0%,
            rgba(41, 183, 199, 0.25) 30%,
            rgba(86, 64, 153, 0.35) 70%,
            #564099d6 100%
          );
        mix-blend-mode: overlay;
        pointer-events: none;
      }
      .hero-inner {
        position: relative;
      }
      .hero-bullets {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 0.9rem;
      }
      .hero-bullets li {
        position: relative;
        padding: 0.85rem 1rem 0.85rem 1rem;
        background: rgba(255, 255, 255, 0.07);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 1rem;
        font-weight: 500;
        backdrop-filter: blur(6px);
      }
      .hero-bullets li span {
        display: inline-block;
      }
      .hero-bullets li:nth-child(2):before {
        background: linear-gradient(135deg, #06b6d4, #fb923c);
      }
      .hero-bullets li:nth-child(3):before {
        background: linear-gradient(135deg, #fb923c, #7c3aed);
      }
      .hero-support-card {
        background: linear-gradient(
          140deg,
          rgba(255, 255, 255, 0.22),
          rgba(255, 255, 255, 0.06)
        );
        border: 1px solid rgba(255, 255, 255, 0.28);
        box-shadow: 0 10px 35px -5px rgba(0, 0, 0, 0.25);
      }
      .hero-cta-wrap {
        display: flex;
        flex-wrap: wrap;
        gap: 0.9rem;
      }
      .countdown-grid-item {
        transition: transform 0.35s ease, background-color 0.35s ease;
      }
      .countdown-grid-item:hover {
        transform: translateY(-4px);
        background: rgba(255, 255, 255, 0.15);
      }
      /* Countdown enhanced */
      .countdown-floating {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        z-index: 30;
        display: flex;
        flex-direction: column;
        align-items: stretch;
        padding: 0.75rem 0.9rem 0 0.9rem;
      }
      @media (min-width: 640px) {
        .countdown-floating {
          padding: 1rem 1.1rem 0 1.1rem;
        }
      }
      @media (min-width: 1024px) {
        .countdown-floating {
          padding: 1.15rem 1.25rem 0 1.25rem;
        }
      }
      .countdown-card {
        width: 100%;
        background: linear-gradient(
          145deg,
          rgba(255, 255, 255, 0.25),
          rgba(255, 255, 255, 0.06)
        );
        backdrop-filter: blur(18px);
        -webkit-backdrop-filter: blur(18px);
        border: 1px solid rgba(255, 255, 255, 0.45);
        border-radius: 1.5rem;
        box-shadow: 0 14px 34px -12px rgba(0, 0, 0, 0.5),
          0 0 0 1px rgba(255, 255, 255, 0.28) inset;
        padding: 1rem 1rem 1.05rem;
        display: flex;
        flex-direction: column;
        gap: 0.85rem;
        min-width: 0;
        max-width: none;
      }
      .countdown-metrics {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 0.45rem;
      }
      .countdown-metrics .countdown-grid-item {
        background: rgba(255, 255, 255, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.35);
        padding: 0.85rem 0.4rem;
        border-radius: 1rem;
        box-shadow: 0 2px 6px -1px rgba(0, 0, 0, 0.25),
          0 0 0 1px rgba(255, 255, 255, 0.2) inset;
      }
      .countdown-metrics .countdown-grid-item span[data-part] {
        text-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
      }
      .countdown-metrics .countdown-grid-item:hover {
        transform: translateY(-3px);
        background: rgba(255, 255, 255, 0.28);
      }
      .countdown-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        font-size: 10px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        font-weight: 600;
        padding: 0.35rem 0.7rem;
        border-radius: 999px;
        background: rgba(20, 184, 166, 0.15);
        color: #ccfbf1;
        border: 1px solid rgba(45, 212, 191, 0.35);
      }
      .countdown-shadow-ring {
        position: absolute;
        inset: 0;
        pointer-events: none;
        border-radius: inherit;
        box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.4),
          0 0 0 6px rgba(255, 255, 255, 0.12),
          0 8px 40px -6px rgba(0, 0, 0, 0.55);
      }
      /* New countdown (index1 style adaptation) */
      .countdown-pro {
        background: linear-gradient(
          145deg,
          rgba(255, 255, 255, 0.2),
          rgba(255, 255, 255, 0.06)
        );
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        border: 1px solid rgba(255, 255, 255, 0.38);
        border-radius: 1.75rem;
        box-shadow: 0 10px 28px -12px rgba(0, 0, 0, 0.55),
          0 0 0 1px rgba(255, 255, 255, 0.25) inset;
        padding: 1.35rem 1.25rem 1.5rem;
        display: flex;
        flex-direction: column;
        gap: 1.15rem;
      }
      .countdown-pro-head {
        text-align: center;
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
      }
      .countdown-pro-head h3 {
        font-size: 1rem;
        font-weight: 800;
        letter-spacing: 0.065em;
        text-transform: uppercase;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.45),
          0 0 6px rgba(255, 255, 255, 0.25);
      }
      .countdown-pro-head p {
        font-size: 0.65rem;
        letter-spacing: 0.05em;
        color: rgba(255, 255, 255, 0.75);
      }
      .countdown-pro-grid {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 0.85rem;
      }
      .countdown-pro-box {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 0.9rem 0.55rem 1rem;
        border-radius: 1.25rem;
        background: linear-gradient(
          160deg,
          rgba(255, 255, 255, 0.38),
          rgba(255, 255, 255, 0.12)
        );
        border: 1px solid rgba(255, 255, 255, 0.5);
        box-shadow: 0 4px 12px -4px rgba(0, 0, 0, 0.45),
          0 0 0 1px rgba(255, 255, 255, 0.28) inset;
        min-width: 0;
      }
      .countdown-pro-box strong {
        font-size: 1.6rem;
        line-height: 1;
        font-weight: 800;
        letter-spacing: 0.5px;
        text-shadow: 0 2px 6px rgba(0, 0, 0, 0.35);
      }
      @media (min-width: 640px) {
        .countdown-pro-box strong {
          font-size: 1.95rem;
        }
      }
      .countdown-pro-box span.label {
        margin-top: 0.35rem;
        font-size: 0.58rem;
        font-weight: 600;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        color: rgba(255, 255, 255, 0.78);
      }
      .countdown-pro-sessions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 0.6rem;
        margin-top: 0.2rem;
      }
      .countdown-pro-sessions .session {
        position: relative;
        padding: 1px;
        border-radius: 1rem;
        background: linear-gradient(
          120deg,
          rgba(251, 146, 60, 0.55),
          rgba(124, 58, 237, 0.55),
          rgba(6, 182, 212, 0.55)
        );
        background-size: 200% 200%;
        animation: countdown-grad-move 11s linear infinite;
      }
      .countdown-pro-sessions .session > div {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.55rem 0.7rem;
        border-radius: 0.95rem;
        background: rgba(0, 0, 0, 0.28);
        backdrop-filter: blur(6px);
        -webkit-backdrop-filter: blur(6px);
        border: 1px solid rgba(255, 255, 255, 0.18);
        font-size: 0.6rem;
        color: #f1f5f9;
        font-weight: 500;
        letter-spacing: 0.02em;
      }
      .countdown-pro-sessions i {
        opacity: 0.85;
      }
      @keyframes countdown-grad-move {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }
      @media (min-width: 1024px) {
        .hero-left-stack {
          max-width: 640px;
        }
      }
      /* Tabs */
      .tabs {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
      }
      .tab-btn {
        padding: 0.6rem 0.9rem;
        border-radius: 999px;
        border: 1px solid rgba(0, 0, 0, 0.08);
        background: #fff;
        font-weight: 600;
      }
      .tab-btn[aria-selected="true"] {
        background: #111;
        color: #fff;
      }
      .tab-panel {
        display: none;
      }
      .tab-panel.active {
        display: block;
      }
      /* Lists breathing room */
      li {
        margin-block: 0.4rem;
      }
      /* Refined donut chart styles */
      .donut-wrap {
        --size: 12rem;
      }
      @media (min-width: 640px) {
        .donut-wrap {
          --size: 13rem;
        }
      }
      .donut-core circle {
        transition: stroke-dashoffset 1.4s cubic-bezier(0.65, 0.05, 0.36, 1);
      }
      .donut-animate .donut-meter {
        animation: donut-fill 1.6s cubic-bezier(0.65, 0.05, 0.36, 1) forwards;
      }
      @keyframes donut-fill {
        from {
          stroke-dashoffset: calc(var(--circum) * 1);
        }
        to {
          stroke-dashoffset: calc(var(--circum) * (1 - 0.6));
        }
      }
      /* ================= Layout / Spacing Fine-Tune (non-content) ================= */
      body {
        line-height: 1.55;
      }
      /* Prevent horizontal scroll on small devices */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }
      html,
      body {
        max-width: 100%;
        overflow-x: hidden;
      }
      img,
      video {
        max-width: 100%;
        height: auto;
      }
      section,
      header,
      footer {
        max-width: 100vw;
        overflow-x: hidden;
      }
      /* Long tokens in inline spans (e.g., account numbers) shouldn't cause overflow */
      .select-all {
        word-break: break-word;
        overflow-wrap: anywhere;
      }
      section.section-pad > .max-w-5xl,
      section.section-pad > .max-w-6xl,
      section.section-pad > .max-w-7xl {
        margin-left: auto;
        margin-right: auto;
      }
      section.section-pad > [class*="max-w-"] > h2:first-child {
        margin-top: 0;
      }
      section + section {
        scroll-margin-top: 70px;
      }
      /* Vertical rhythm between consecutive sections */
      .section-pad + .section-pad {
        padding-top: 2.25rem;
      }
      @media (min-width: 768px) {
        .section-pad + .section-pad {
          padding-top: 3.25rem;
        }
      }
      /* Constrain very wide single-column text blocks for readability */
      .readable,
      section p.readable {
        max-width: 68ch;
      }
      /* Paragraph spacing inside panels/cards */
      .card p + p {
        margin-top: 0.9rem;
      }
      /* Unified heading spacing */
      section h2 {
        line-height: 1.15;
        letter-spacing: -0.015em;
      }
      section h2 + p {
        margin-top: 0.85rem;
      }
      /* Grid gap normalization (avoid overly tight columns) */
      section .grid.gap-6 {
        row-gap: 2rem;
      }
      @media (min-width: 1024px) {
        section .grid.gap-6 {
          column-gap: 2.25rem;
        }
      }
      /* Form field vertical alignment */
      #register-form .md\:col-span-2 + .md\:col-span-2 {
        margin-top: 0;
      }
      /* Reduce bottom space from last element inside section containers */
      section [class*="max-w-"] > *:last-child {
        margin-bottom: 0;
      }
      /* Tab panel readability */
      .q-panel p {
        max-width: 60ch;
      }
      /* Session list click targets alignment (already interactive elsewhere) */
      .js-session-choice {
        transition: background-color 0.35s, box-shadow 0.35s;
      }
      .js-session-choice.ring-2 {
        box-shadow: 0 4px 20px -4px rgba(124, 58, 237, 0.25);
      }
      /* Counter image + text alignment tweaks */
      img[alt="4Q Mind Vehicle"] {
        object-fit: cover;
      }
      /* Avoid accidental long-word overflow */
      body {
        overflow-wrap: break-word;
      }
      /* Make sure lists inside narrow columns have breathing room */
      ul {
        margin-block-start: 0.5rem;
        margin-block-end: 0.5rem;
      }
      /* Subtle improvement to buttons alignment inside hero */
      .hero-cta-wrap .btn {
        line-height: 1.1;
      }
      /* Ensure schedule & register sections have consistent inner spacing */
      #schedule [class*="rounded-"][class*="1.05rem"],
      #register form.card {
        margin-top: 1.25rem;
      }
      /* Slightly tighten gap in pricing feature chips to reduce wrap height */
      [class*="feature-chips"] {
        gap: 0.45rem;
      }
      /* Prevent overly tall empty space on mobile under large heading stacks */
      @media (max-width: 480px) {
        .hero-left-stack h1 {
          line-height: 1.18;
        }
      }
      /* Safeguard: do not let indicator shrink invisibly */
      .q-indicator {
        min-width: 60px;
      }
      /* Cards equalize internal vertical rhythm */
      .card-lg > :last-child {
        margin-bottom: 0;
      }
      /* Improved focus outline visibility on dark gradient backgrounds */
      :focus-visible {
        outline-offset: 3px;
      }
      /* === Unified section alignment === */
      :root {
        --layout-max: 72rem;
        --layout-pad: 1.5rem;
      }
      section.section-pad > .max-w-5xl,
      section.section-pad > .max-w-6xl,
      section.section-pad > .max-w-7xl {
        max-width: var(--layout-max) !important;
        padding-left: var(--layout-pad);
        padding-right: var(--layout-pad);
      }
      /* Ensure internal nested reveal wrappers align too */
      section.section-pad > .max-w-5xl.reveal,
      section.section-pad > .max-w-6xl.reveal,
      section.section-pad > .max-w-7xl.reveal {
        max-width: var(--layout-max) !important;
        padding-left: var(--layout-pad);
        padding-right: var(--layout-pad);
      }
      /* Consistent heading bottom margin */
      section h2 {
        margin-bottom: 1.75rem;
      }
      /* Prevent overly wide blockquotes if container differs */
      blockquote {
        max-width: 60ch;
      }
      /* ================== Animation Enhancements (no content change) ================== */
      @media (prefers-reduced-motion: no-preference) {
        @keyframes fade-up {
          from {
            opacity: 0;
            transform: translateY(22px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        @keyframes fade-scale {
          from {
            opacity: 0;
            transform: translateY(20px) scale(0.97);
          }
          to {
            opacity: 1;
            transform: none;
          }
        }
        @keyframes float-y {
          0%,
          100% {
            transform: translateY(-4px);
          }
          50% {
            transform: translateY(6px);
          }
        }
        @keyframes gradient-pan {
          0% {
            background-position: 0% 50%;
          }
          50% {
            background-position: 100% 50%;
          }
          100% {
            background-position: 0% 50%;
          }
        }
        .anim-fade {
          opacity: 0;
          animation: fade-up 0.85s cubic-bezier(0.65, 0.05, 0.36, 1) forwards;
          animation-delay: var(--anim-delay, 0s);
        }
        .anim-fade-scale {
          opacity: 0;
          animation: fade-scale 0.9s cubic-bezier(0.65, 0.05, 0.36, 1) forwards;
          animation-delay: var(--anim-delay, 0s);
        }
        .anim-float-slow {
          animation: float-y 9s ease-in-out infinite;
        }
        .gradient-pan {
          background-size: 200% 100%;
          animation: gradient-pan 12s linear infinite;
        }
        .card {
          transition: transform 0.6s cubic-bezier(0.25, 0.6, 0.3, 1),
            box-shadow 0.6s;
        }
        .card:hover {
          transform: translateY(-6px);
          box-shadow: 0 18px 38px -14px rgba(0, 0, 0, 0.18),
            0 8px 18px -8px rgba(0, 0, 0, 0.12);
        }
        .hero-bullets li {
          transition: background 0.5s, transform 0.5s;
        }
        .hero-bullets li:hover {
          transform: translateY(-4px);
        }
        /* Session map styles */
        .session-map-card {
          background: linear-gradient(
            145deg,
            rgba(255, 255, 255, 0.3),
            rgba(255, 255, 255, 0.08)
          );
          backdrop-filter: blur(14px);
          -webkit-backdrop-filter: blur(14px);
          border: 1px solid rgba(255, 255, 255, 0.42);
          border-radius: 1.75rem;
          box-shadow: 0 10px 28px -12px rgba(0, 0, 0, 0.55),
            0 0 0 1px rgba(255, 255, 255, 0.25) inset;
          padding: 1.75rem 1.5rem;
          display: flex;
          flex-direction: column;
          gap: 1.2rem;
        }
        .session-map-wrap {
          position: relative;
          aspect-ratio: 4/3;
          width: 100%;
          border-radius: 1.25rem;
          overflow: hidden;
          background: radial-gradient(
              circle at 30% 30%,
              rgba(255, 255, 255, 0.45),
              rgba(255, 255, 255, 0.05) 70%
            ),
            linear-gradient(
              120deg,
              rgba(124, 58, 237, 0.35),
              rgba(6, 182, 212, 0.35),
              rgba(251, 146, 60, 0.35)
            );
        }
        .session-map-wrap svg {
          width: 100%;
          height: 100%;
          display: block;
        }
        .map-pin {
          cursor: pointer;
          transition: transform 0.35s ease, filter 0.35s ease;
        }
        .map-pin:hover {
          transform: scale(1.15);
          filter: brightness(1.15);
        }
        .map-pin circle {
          stroke: #fff;
          stroke-width: 2px;
        }
        .map-label {
          font-size: 10px;
          font-weight: 600;
          letter-spacing: 0.5px;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }
        .session-list {
          display: grid;
          gap: 0.6rem;
          font-size: 0.8rem;
        }
        .session-item {
          display: flex;
          align-items: flex-start;
          gap: 0.55rem;
          padding: 0.6rem 0.75rem;
          border: 1px solid rgba(255, 255, 255, 0.35);
          background: rgba(255, 255, 255, 0.18);
          border-radius: 0.9rem;
          font-weight: 500;
          line-height: 1.3;
        }
        .session-item .dot {
          width: 0.7rem;
          height: 0.7rem;
          border-radius: 50%;
          margin-top: 0.2rem;
          flex: none;
          background: linear-gradient(135deg, #7c3aed, #06b6d4);
        }
        .session-item[data-loc="Johor"] .dot {
          background: linear-gradient(135deg, #06b6d4, #fb923c);
        }
        .session-item[data-loc="Selangor"] .dot {
          background: linear-gradient(135deg, #fb923c, #7c3aed);
        }
        /* Google map container */
        .hero-gmap {
          position: relative;
          inset: 0;
          width: 100%;
          height: 100%;
          min-height: 260px;
        }
        .session-map-wrap.gmap {
          background: rgba(255, 255, 255, 0.12);
          backdrop-filter: blur(4px);
          -webkit-backdrop-filter: blur(4px);
        }
        .gmap-fallback {
          position: absolute;
          inset: 0;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          font-size: 0.75rem;
          letter-spacing: 0.05em;
          color: #fff;
          background: linear-gradient(
            160deg,
            rgba(124, 58, 237, 0.5),
            rgba(6, 182, 212, 0.45)
          );
          text-align: center;
          padding: 1rem;
        }
        /* Leaflet custom attribution & tooltips */
        .leaflet-attrib-mini {
          position: absolute;
          right: 6px;
          bottom: 4px;
          font-size: 9px;
          font-weight: 500;
          background: rgba(255, 255, 255, 0.65);
          padding: 2px 6px;
          border-radius: 6px;
          color: #334155;
          backdrop-filter: blur(4px);
          -webkit-backdrop-filter: blur(4px);
        }
        .session-tooltip {
          background: rgba(0, 0, 0, 0.55);
          color: #fff;
          border: none;
          box-shadow: 0 2px 6px -2px rgba(0, 0, 0, 0.4);
          padding: 2px 6px;
          font-size: 11px;
          font-weight: 600;
          border-radius: 6px;
        }
        .session-tooltip:before {
          display: none;
        }
      }
      /* === Registration form mobile responsiveness === */
      @media (max-width: 640px) {
        #register .card {
          padding: 1rem;
          border-radius: 1rem;
        }
        #register-form {
          gap: 1rem;
        }
        #register-form > div {
          margin-left: 0;
          margin-right: 0;
        }
        #register-form label {
          font-size: 0.95rem;
          line-height: 1.3;
        }
        #register-form input,
        #register-form select,
        #register-form textarea {
          font-size: 16px;
          min-height: 44px;
          padding: 0.65rem 0.75rem;
          border-radius: 0.65rem;
        }
        #register-form input[type="file"] {
          padding-left: 0.5rem;
          padding-right: 0.5rem;
        }
        #payment-card .grid {
          gap: 1rem;
        }
        #payment-card .rounded-xl {
          padding: 0.9rem;
        }
        #pay-qr {
          width: 11rem;
          height: 11rem;
          margin-left: auto;
          margin-right: auto;
          display: block;
        }
        #register #register-submit {
          width: 100%;
          justify-content: center;
        }
        /* Tidy bank list lines on mobile */
        .bank-list li {
          display: grid;
          grid-template-columns: 1fr;
          grid-row-gap: 0.5rem;
          align-items: start;
        }
        .bank-list li > span:first-child {
          color: #374151;
        }
        .bank-list li > span.select-all {
          word-break: break-word;
          overflow-wrap: anywhere;
        }
        .bank-list li > button {
          justify-self: start;
        }
        .bank-list li + li {
          margin-top: 0.9rem !important;
        }
      }
      .payment-radio input[type="radio"]:checked + span {
        color: #000;
      }
      .payment-radio input[type="radio"]:checked {
        box-shadow: 0 0 0 2px #7c3aed44;
      }
      .payment-radio input[type="radio"]:focus-visible {
        outline: 2px solid #7c3aed;
        outline-offset: 2px;
      }
      .modern-price-card {
        box-shadow: 0 8px 32px 0 rgba(124, 58, 237, 0.1),
          0 1.5px 8px 0 rgba(6, 182, 212, 0.08);
        border-radius: 1.5rem;
        font-family: "Inter", ui-sans-serif, system-ui, -apple-system,
          BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial,
          "Noto Sans", sans-serif;
        min-width: 210px;
      }
      .modern-price-card .drop-shadow-sm {
        filter: drop-shadow(0 2px 4px rgba(124, 58, 237, 0.08));
      }
      .partner-coming-card {
        box-shadow: 0 4px 18px -6px #7c3aed22;
        margin-bottom: 1.2rem;
      }
      .modern-pay-card {
        box-shadow: 0 8px 32px 0 rgba(124, 58, 237, 0.1),
          0 1.5px 8px 0 rgba(6, 182, 212, 0.08);
        border-radius: 1.5rem;
        font-family: "Inter", ui-sans-serif, system-ui, -apple-system,
          BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial,
          "Noto Sans", sans-serif;
      }
      .modern-pay-card .payment-radio input[type="radio"] {
        margin-right: 0.5rem;
      }
      .modern-pay-card .payment-radio {
        transition: box-shadow 0.18s, border-color 0.18s, background 0.18s;
      }
      .modern-pay-card .payment-radio:has(input[type="radio"]:checked) {
        background: linear-gradient(90deg, #7c3aed11 0%, #06b6d411 100%);
        border-color: #7c3aed;
        box-shadow: 0 2px 12px -2px #7c3aed22;
      }
      .modern-pay-card .payment-radio:has(input[type="radio"]:checked) span {
        color: #222 !important;
      }
      .modern-pay-card .payment-radio:has(input[type="radio"]:checked) svg {
        filter: none;
      }

      .hero-bubbles {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }
      .bubble {
        position: absolute;
        border-radius: 50%;
        opacity: 0.18;
        background: linear-gradient(135deg, #29b7c7 60%, #564099d6 100%);
        filter: blur(2px);
        animation: bubble-float 12s infinite ease-in-out;
      }
      .bubble1 {
        width: 90px;
        height: 90px;
        left: 10%;
        top: 60%;
        animation-delay: 0s;
      }
      .bubble2 {
        width: 60px;
        height: 60px;
        left: 70%;
        top: 30%;
        animation-delay: 2s;
      }
      .bubble3 {
        width: 120px;
        height: 120px;
        left: 50%;
        top: 80%;
        animation-delay: 4s;
      }
      .bubble4 {
        width: 70px;
        height: 70px;
        left: 80%;
        top: 70%;
        animation-delay: 6s;
      }
      .bubble5 {
        width: 100px;
        height: 100px;
        left: 25%;
        top: 20%;
        animation-delay: 8s;
      }
      @keyframes bubble-float {
        0% {
          transform: translateY(0) scale(1);
          opacity: 0.35;
        }
        30% {
          opacity: 0.5;
        }
        50% {
          transform: translateY(-60px) scale(1.08);
          opacity: 0.4;
        }
        70% {
          opacity: 0.5;
        }
        100% {
          transform: translateY(0) scale(1);
          opacity: 0.35;
        }
      }
    </style>
    <script src="https://cdn.tailwindcss.com?plugins=typography,forms"></script>
    <script defer="" src="https://unpkg.com/lucide@latest"></script>
    <!-- Leaflet (OpenStreetMap) 无需 API Key -->
    <link
      crossorigin="anonymous"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      rel="stylesheet"
    />
    <script
      crossorigin="anonymous"
      defer=""
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    ></script>
    <!-- Meta Pixel Code -->
    <script>
      !(function (f, b, e, v, n, t, s) {
        if (f.fbq) return;
        n = f.fbq = function () {
          n.callMethod
            ? n.callMethod.apply(n, arguments)
            : n.queue.push(arguments);
        };
        if (!f._fbq) f._fbq = n;
        n.push = n;
        n.loaded = !0;
        n.version = "2.0";
        n.queue = [];
        t = b.createElement(e);
        t.async = !0;
        t.src = v;
        s = b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t, s);
      })(
        window,
        document,
        "script",
        "https://connect.facebook.net/en_US/fbevents.js"
      );
      fbq("init", "2159245077891716");
      fbq("track", "PageView");
    </script>
    <noscript
      ><img
        height="1"
        src="https://www.facebook.com/tr?id=2159245077891716&amp;ev=PageView&amp;noscript=1"
        style="display: none"
        width="1"
    /></noscript>
    <!-- End Meta Pixel Code -->
  </head>
  <body class="bg-white text-gray-800">
    <div id="page-progress">
      <div class="bar"></div>
    </div>
    <header
      class="sticky top-0 z-50 bg-white/95 backdrop-blur-xl border-b border-gray-200/60 shadow-sm"
    >
      <div
        class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between"
      >
        <!-- Enhanced Logo Section -->
        <div class="flex items-center gap-4">
          <div class="relative group">
            <div
              class="absolute inset-0 rounded-xl bg-gradient-to-r from-purple-200/30 via-teal-200/30 to-orange-200/30 blur-md opacity-60 group-hover:opacity-80 transition-opacity duration-300"
            ></div>
            <div
              class="relative bg-white/80 backdrop-blur-sm rounded-xl p-2 border border-gray-200/60 shadow-sm"
            >
              <img
                alt="4Q Mirror PlayLab"
                class="h-12 w-auto object-contain"
                src="assets/parents_first_logo.png"
              />
            </div>
          </div>

          <!-- Brand Text -->
          <div class="hidden md:block">
            <div class="text-sm font-semibold text-gray-900">
              4Q Mirror PlayLab
            </div>
            <div class="text-xs text-gray-600">Parent-Child Growth Camp</div>
          </div>
        </div>

        <!-- Enhanced Navigation -->
        <div class="flex items-center gap-6">
          <!-- Quick Info Badge -->

          <!-- Responsive language switch: pill on lg, buttons on md, stacked on sm -->
          <div class="flex items-center gap-2">
            <!-- Large pill for lg+ -->
            <div
              class="hidden lg:inline-flex items-center gap-2 bg-gradient-to-r from-purple-50 to-teal-50 border border-purple-200/60 rounded-full px-3 py-1"
            >
              <a
                href="https://parentsfirst-4q-playlab-course.vercel.app/"
                class="text-sm font-semibold text-purple-700 px-2 py-1 rounded hover:bg-purple-100/40"
                aria-label="中文站"
                >中文</a
              >
            </div>

            <!-- Medium: side-by-side buttons for md -->
            <div class="hidden md:flex lg:hidden items-center gap-2">
              <a
                href="https://parentsfirst-4q-playlab-course.vercel.app/"
                class="text-sm font-semibold text-purple-700 border border-purple-100 rounded px-3 py-1 hover:bg-purple-50"
                aria-label="中文站"
                >中文</a
              >
            </div>

            <!-- Small: stacked, compact touch targets -->
            <div class="flex md:hidden flex-col gap-2 w-28">
              <a
                href="https://parentsfirst-4q-playlab-course.vercel.app/"
                class="text-sm font-semibold text-purple-700 bg-white border border-gray-200 rounded-full px-3 py-1.5 text-center shadow-sm"
                aria-label="中文站"
                >中文</a
              >
            </div>
          </div>

          <!-- Enhanced CTA Button -->
          <div class="relative group">
            <div
              class="absolute inset-0 bg-gradient-to-r from-orange-400 via-purple-500 to-teal-400 rounded-full blur-md opacity-60 group-hover:opacity-80 transition-opacity duration-300"
            ></div>
            <a
              class="relative bg-gradient-to-r from-orange-500 via-purple-600 to-teal-500 hover:from-orange-600 hover:via-purple-700 hover:to-teal-600 text-white font-bold px-6 py-3 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center gap-2"
              href="#register"
            >
              <span>Register Now</span>
              <i class="w-4 h-4" data-lucide="arrow-right"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- Progress Bar -->
      <div
        class="h-1 bg-gradient-to-r from-purple-500 via-teal-500 to-orange-500 opacity-60"
      ></div>
    </header>
    <!-- Top main map Section-->
    <section
      aria-labelledby="hero-heading"
      class="hero relative text-white overflow-hidden bg-gradient-to-br from-[#29b7c7] via-[#564099d6] to-[#29b7c7] min-h-screen flex items-center"
    >
      <div class="hero-gradient-overlay"></div>

      <!-- Enhanced Animated Bubbles -->
      <div class="hero-bubbles">
        <span class="bubble bubble1"></span>
        <span class="bubble bubble2"></span>
        <span class="bubble bubble3"></span>
        <span class="bubble bubble4"></span>
        <span class="bubble bubble5"></span>
      </div>

      <div
        class="max-w-7xl mx-auto px-4 py-16 grid lg:grid-cols-12 gap-16 items-center hero-inner relative z-10"
      >
        <!-- Left: Enhanced Headline/CTA -->
        <div class="lg:col-span-7 hero-left-stack space-y-10 reveal">
          <!-- Enhanced Badge -->
          <div
            class="flex flex-wrap items-center gap-3 anim-fade"
            style="--anim-delay: 0.05s"
          >
            <div class="relative group">
              <div
                class="absolute inset-0 rounded-full bg-purple-200/70 blur-md opacity-70 group-hover:opacity-90 transition"
              ></div>
              <div
                class="relative bg-gradient-to-r from-purple-100/85 via-white/85 to-teal-100/85 hover:from-purple-100 hover:via-white hover:to-teal-100 text-purple-900 px-8 py-4 rounded-full font-extrabold text-lg md:text-2xl tracking-wide shadow-sm ring-1 ring-purple-200/60 flex items-center gap-3 backdrop-blur transform hover:scale-105 transition-transform duration-300"
              >
                <span class="inline-block animate-pulse">🌱</span>
                <span>Not Another Parenting Course.</span>
              </div>
            </div>
          </div>

          <!-- Enhanced Main Heading -->
          <h1
            class="mt-8 max-w-[24ch] text-[3rem] sm:text-[3.5rem] md:text-[4.2rem] lg:text-[4.5rem] font-black leading-[1.08] md:leading-[1.06] tracking-tight tracking-[-0.02em] balance text-white anim-fade-scale drop-shadow-[0_10px_32px_rgba(16,185,129,0.22)]"
            id="hero-heading"
            style="--anim-delay: 0.15s"
          >
            This is Malaysia's
            <span
              class="bg-gradient-to-r from-yellow-200 via-orange-200 to-purple-300 bg-clip-text text-transparent font-extrabold relative"
              style="padding: 0 0.15em"
            >
              First 4Q Mirror PlayLab
              <div
                class="absolute -bottom-2 left-0 right-0 h-1 bg-gradient-to-r from-yellow-300 via-orange-300 to-purple-400 rounded-full opacity-60"
              ></div>
            </span>
          </h1>

          <!-- Enhanced Description -->
          <div class="readable leading-relaxed-2 space-y-6">
            <p class="text-xl md:text-2xl font-medium leading-relaxed">
              "In an AI-driven world, IQ alone is no longer enough. The future
              belongs to children who can regulate emotions (EQ), adapt (AQ),
              and create social meaning (SQ). That begins with you — today."
            </p>
          </div>

          <!-- Enhanced CTA Button -->
          <div
            class="hero-cta-wrap anim-fade bg-gradient-to-r from-yellow-300 via-orange-300 to-purple-400/90 rounded-2xl shadow-lg p-1 transform hover:scale-105 transition-transform duration-300"
            style="--anim-delay: 0.45s"
          >
            <a
              class="btn btn--primary shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-purple-700 focus-visible:ring-orange-300 text-lg font-bold px-8 py-4"
              href="#register"
              >👉 Secure My Early Bird Seat — Save RM1,120</a
            >
          </div>

          <!-- New Feature Highlights -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
            <div
              class="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20"
            >
              <div class="text-2xl mb-2">🎯</div>
              <div class="text-sm font-semibold">
                Personalized 4Q Assessment
              </div>
            </div>
            <div
              class="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20"
            >
              <div class="text-2xl mb-2">🔬</div>
              <div class="text-sm font-semibold">Science-Based Framework</div>
            </div>
            <div
              class="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20"
            >
              <div class="text-2xl mb-2">🤝</div>
              <div class="text-sm font-semibold">Community Support</div>
            </div>
          </div>
        </div>

        <!-- Right: Enhanced Map and session list -->
        <div class="lg:col-span-5 space-y-8 reveal">
          <div
            class="session-map-card anim-fade-scale transform hover:scale-105 transition-transform duration-500"
            style="--anim-delay: 0.2s"
          >
            <!-- Enhanced Header -->
            <div class="text-center mb-6">
              <div
                class="inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-full px-4 py-2 mb-3"
              >
                <span class="text-lg">📍</span>
                <span class="text-xs font-semibold uppercase tracking-wider"
                  >2025 Locations</span
                >
              </div>
              <h3
                class="text-xl font-extrabold tracking-wide uppercase text-white/95 drop-shadow mb-2"
              >
                2025 PlayLab | Locations & Dates
              </h3>
              <p class="text-sm tracking-wide text-white/70">
                Choose the city and date that best fit your schedule.
              </p>
            </div>

            <!-- Enhanced Map Container -->
            <div class="session-map-wrap gmap mb-6 relative overflow-hidden">
              <div
                aria-label="课程城市地图 (OpenStreetMap)"
                class="hero-gmap"
                id="hero-gmap"
              ></div>
              <div class="gmap-fallback" hidden="" id="gmap-fallback">
                <p>地图加载中 / 无法显示地图。</p>
                <p class="mt-1 opacity-80">请检查网络或稍后再试。</p>
              </div>
              <!-- Map Overlay Decoration -->
              <div
                class="absolute top-4 right-4 bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2"
              >
                <span class="text-xs font-semibold">Interactive Map</span>
              </div>
            </div>

            <!-- Enhanced Session List -->
            <div class="session-list space-y-4" id="hero-session-list">
              <div
                class="session-item transform hover:scale-105 transition-transform duration-300 cursor-pointer"
                data-loc="Penang"
                data-session="Penang · 4 &amp; 5 October 2025（9am - 5pm）"
              >
                <span class="dot"></span>
                <div class="flex-1">
                  <div class="font-semibold text-base">
                    Penang | 4 &amp; 5 October 2025
                  </div>
                  <div class="text-[11px] opacity-80 mt-1 font-medium">
                    9am - 5pm
                  </div>
                  <div class="text-[13px] opacity-80 mt-1">
                    JEN Penang Georgetown by Shangri-La
                  </div>
                </div>
                <div
                  class="text-xs bg-white/20 rounded-full px-2 py-1 font-semibold"
                >
                  Available
                </div>
              </div>
              <div
                class="session-item transform hover:scale-105 transition-transform duration-300 cursor-pointer"
                data-loc="Johor"
                data-session="Johor · 18 &amp; 19 October 2025（9am - 5pm）"
              >
                <span class="dot"></span>
                <div class="flex-1">
                  <div class="font-semibold text-base">
                    Johor | 18 &amp; 19 October 2025
                  </div>
                  <div class="text-[11px] opacity-80 mt-1 font-medium">
                    9am - 5pm
                  </div>
                  <div class="text-[13px] opacity-80 mt-1">
                    Hotel Granada Johor Bahru
                  </div>
                </div>
                <div
                  class="text-xs bg-white/20 rounded-full px-2 py-1 font-semibold"
                >
                  Available
                </div>
              </div>
              <div
                class="session-item transform hover:scale-105 transition-transform duration-300 cursor-pointer"
                data-loc="Selangor"
                data-session="Selangor · 29 &amp; 30 November 2025（9am - 5pm）"
              >
                <span class="dot"></span>
                <div class="flex-1">
                  <div class="font-semibold text-base">
                    Selangor | 29 &amp; 30 November 2025
                  </div>
                  <div class="text-[11px] opacity-80 mt-1 font-medium">
                    9am - 5pm
                  </div>
                  <div class="text-[13px] opacity-80 mt-1">
                    The Pearl Kuala Lumpur Hotel
                  </div>
                </div>
                <div
                  class="text-xs bg-white/20 rounded-full px-2 py-1 font-semibold"
                >
                  Available
                </div>
              </div>
            </div>

            <!-- Enhanced Footer -->
            <div class="text-center pt-4 border-t border-white/20">
              <div class="text-[12px] text-white/70 tracking-wide mb-2">
                Click a city to auto-fill the session details.
              </div>
              <div
                class="flex items-center justify-center gap-2 text-xs text-white/60"
              >
                <span>🔒</span>
                <span>Secure Registration</span>
                <span>•</span>
                <span>💳</span>
                <span>Multiple Payment Options</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Why This Matters Now Section -->
    <section class="section-pad bg-white">
      <div class="max-w-6xl mx-auto px-4 reveal">
        <div class="md:grid md:grid-cols-12 md:items-center md:gap-12">
          <!-- Visual (young family image) -->
          <div class="md:col-span-5 flex justify-center mb-10 md:mb-0">
            <div aria-hidden="true" class="relative group">
              <div
                class="absolute -inset-4 rounded-[2.75rem] bg-gradient-to-tr from-purple-400/10 via-teal-400/10 to-orange-300/10 blur-xl pointer-events-none"
              ></div>
              <div
                class="relative rounded-[2.5rem] p-2 bg-gradient-to-br from-white to-teal-50 border border-purple-200/60 shadow-sm"
              >
                <img
                  alt="家庭亲子互动"
                  class="block w-full h-auto rounded-2xl"
                  decoding="async"
                  loading="lazy"
                  src="assets/young-family.png"
                />
              </div>
            </div>
          </div>
          <!-- Quote Content (text unchanged) -->
          <div
            class="md:col-span-7 text-center md:text-left flex flex-col gap-3"
          >
            <div class="flex flex-col md:flex-row md:items-center gap-2 mb-2">
              <span
                class="inline-flex items-center justify-center w-14 h-14 rounded-full bg-gradient-to-br from-red-400 via-yellow-300 to-orange-400 text-white text-3xl shadow ring-2 ring-white/60 md:mr-3"
                >❤️</span
              >
              <h2
                class="text-2xl md:text-4xl font-extrabold tracking-tight bg-gradient-to-r from-red-500 via-yellow-500 to-orange-500 bg-clip-text text-transparent drop-shadow pt-4"
              >
                Why This Matters Now
              </h2>
            </div>
            <p
              class="text-xl md:text-2xl font-bold text-gray-900 leading-snug mb-1"
            >
              Your child's first six years will never return.
            </p>
            <p class="text-lg md:text-xl text-gray-700 leading-relaxed mb-2">
              Every story you tell, every bedtime reaction, every reaction you
              show wires their brain for life.
            </p>
            <div
              class="bg-white/95 border-l-4 border-green-400 rounded-2xl p-4 flex flex-col gap-2 shadow-md"
            >
              <div class="flex items-start gap-2">
                <span class="text-green-600 text-2xl">✅</span>
                <span class="text-base md:text-lg text-gray-800 font-medium"
                  >EQ at age 5 predicts adult success more than IQ.
                  <span class="text-gray-500 font-normal"
                    >(Harvard Study, 2015)</span
                  ></span
                >
              </div>
              <div class="flex items-start gap-2">
                <span class="text-green-600 text-2xl">✅</span>
                <span class="text-base md:text-lg text-gray-800 font-medium"
                  >Neuroscience findings prove: the first 2,000 days are the
                  "golden investment" window.</span
                >
              </div>
            </div>
            <p class="text-base md:text-lg text-gray-700 font-medium mt-2">
              Why waste this window, if the child has the opportunity given by
              you?
            </p>
          </div>
        </div>
      </div>
    </section>

    <section
      class="section-pad bg-gradient-to-br from-purple-50 to-teal-50"
      id="why"
    >
      <div
        class="max-w-6xl mx-auto px-4 py-12 md:py-16 flex flex-col items-center reveal"
      >
        <div
          class="rounded-3xl bg-white/80 backdrop-blur-xl border border-purple-100/60 shadow-2xl p-8 md:p-12 flex flex-col gap-7 items-center w-full"
        >
          <h2
            class="text-3xl md:text-4xl font-extrabold tracking-tight bg-gradient-to-r from-purple-500 via-teal-500 to-orange-400 bg-clip-text text-transparent drop-shadow mb-2 text-center"
          >
            What Makes PlayLab Different
          </h2>
          <p
            class="text-lg md:text-xl text-gray-800 max-w-2xl mx-auto text-center"
          >
            Other parenting courses give you theory and ways.<br />PlayLab gives
            you a <span class="font-bold text-purple-700">Mirror</span> — a way
            to see yourself and your child in real-time.
          </p>
          <ul class="text-left max-w-xl mx-auto space-y-4 mt-2 mb-2">
            <li class="flex items-start gap-4">
              <span
                class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-gradient-to-br from-teal-400 via-purple-200 to-orange-200 text-white text-xl shadow ring-2 ring-white/60"
                >🔹</span
              ><span
                ><b>Mirror PlayLab Activities</b>
                <span class="text-gray-500 font-normal"
                  >— discover personalized tools to upgrade self 4Q
                  abilities</span
                ></span
              >
            </li>
            <li class="flex items-start gap-4">
              <span
                class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-gradient-to-br from-teal-400 via-purple-200 to-orange-200 text-white text-xl shadow ring-2 ring-white/60"
                >🔹</span
              ><span
                ><b>4Q Inner Future Blueprint</b>
                <span class="text-gray-500 font-normal"
                  >— your child's 4Q growth, based on neuroscience</span
                ></span
              >
            </li>
            <li class="flex items-start gap-4">
              <span
                class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-gradient-to-br from-teal-400 via-purple-200 to-orange-200 text-white text-xl shadow ring-2 ring-white/60"
                >🔹</span
              ><span
                ><b>MindVehicle Framework</b>
                <span class="text-gray-500 font-normal"
                  >— Dr. Elaine's award-winning system (CCE Finland 2025: Best
                  Curriculum Design)</span
                ></span
              >
            </li>
          </ul>
          <p
            class="text-lg md:text-xl text-gray-800 max-w-2xl mx-auto text-center"
          >
            This isn't about "fixing."<br />It's about equipping parents in an
            AI world so your child will not only have IQ, but other QQQ.
          </p>
        </div>
      </div>
    </section>

    <section
      class="section-pad bg-gradient-to-br from-white via-purple-50/50 to-teal-50/50"
      id="the-promise"
    >
      <div class="max-w-6xl mx-auto px-4 reveal">
        <div class="grid md:grid-cols-12 gap-10 items-center">
          <!-- Content -->
          <div class="md:col-span-7">
            <header class="flex items-center gap-3 mb-2">
              <span
                aria-hidden="true"
                class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 via-teal-400 to-orange-400 text-white text-2xl shadow ring-2 ring-white/60"
                >💎</span
              >
              <h2
                class="text-3xl md:text-4xl font-extrabold tracking-tight text-gray-900 pt-7"
              >
                The Promise
              </h2>
            </header>
            <div class="space-y-4 text-base md:text-lg text-gray-800 leading-8">
              <p class="readable">
                No more reading articles but never apply. No more guessing how
                to handle tantrums. No more waiting until it's "too late."
              </p>
              <div
                class="rounded-2xl border border-gray-200 bg-white p-5 md:p-6 shadow-sm"
              >
                <p class="font-semibold mb-2">Instead, you'll leave with:</p>
                <ul class="list-disc pl-5 space-y-2">
                  <li>
                    ✅ Practical tools for daily situations (bedtime,
                    tantrums..)
                  </li>
                  <li>✅ A calmer, stronger bond with your child</li>
                  <li>
                    ✅ Clarity on your child's 4Q development (IQ, EQ, AQ, SQ)
                  </li>
                </ul>
              </div>
              <p class="text-gray-900">
                <span class="font-semibold">And most importantly:</span><br />
                👉 Your child will remember not the toys you bought, but the
                safety and joy they felt with you.
              </p>
            </div>
          </div>

          <!-- Visual -->
          <figure class="md:col-span-5">
            <div
              class="relative rounded-3xl overflow-hidden border border-purple-200/60 bg-white/90 backdrop-blur shadow-xl"
            >
              <img
                alt="Parents and child — real moments of connection"
                class="w-full h-auto object-cover"
                src="assets/family-testimonial.png"
              />
            </div>
          </figure>
        </div>
      </div>
    </section>

    <!-- Why Parents Trust 4Q Framework Section-->
    <section
      class="section-pad bg-gradient-to-br from-purple-50 to-teal-50"
      id="trust-4q"
    >
      <div class="max-w-6xl mx-auto px-4 reveal">
        <!-- Moved Title/Header Outside Before Image -->
        <div class="flex flex-col items-center mb-8">
          <header class="flex items-center gap-4 mb-2 justify-center">
            <span
              aria-hidden="true"
              class="inline-flex items-center justify-center w-14 h-14 rounded-full bg-gradient-to-br from-purple-500 via-teal-400 to-orange-400 text-white text-3xl shadow ring-2 ring-white/60"
              >🏆</span
            >
            <h2
              class="text-3xl md:text-4xl font-extrabold tracking-tight text-gray-900 pt-7 text-center"
            >
              Why Parents Trust
              <span class="text-purple-700">4Q Framework</span>
            </h2>
          </header>
        </div>
        <div
          class="flex flex-col md:flex-row gap-12 items-center md:items-stretch"
        >
          <!-- Visual -->
          <figure
            class="md:w-2/5 w-full flex-shrink-0 flex items-center justify-center"
          >
            <div
              class="relative rounded-4xl overflow-hidden border-2 border-purple-200/70 bg-white/95 backdrop-blur-xl shadow-2xl transition-transform duration-300 hover:scale-[1.025] hover:shadow-3xl"
              style="min-width: 270px"
            >
              <img
                alt="4Q MindVehicle illustration (IQ · EQ · AQ · SQ)"
                class="w-full h-auto object-cover aspect-[4/3]"
                src="assets/mindvehicle_hero_image3.png"
                loading="lazy"
              />
            </div>
          </figure>
          <!-- Content -->
          <div class="md:w-3/5 w-full flex flex-col justify-center gap-5">
            <p
              class="text-lg md:text-xl text-gray-700 leading-relaxed mb-2 max-w-2xl"
            >
              Malaysia's first parental education program to receive
              <span class="font-semibold text-purple-700"
                >global recognition</span
              >.
            </p>
            <ul
              class="space-y-3 text-base md:text-lg text-gray-800 leading-7 list-none pl-0"
            >
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-xl mt-0.5">✅</span>
                <span
                  ><strong>Best Curriculum Design Innovation 2025</strong> — CCE
                  Finland</span
                >
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-xl mt-0.5">✅</span>
                <span
                  ><strong
                    >First Professional Certification in Parenting</strong
                  >
                  recognized by a prestigious national university</span
                >
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-xl mt-0.5">✅</span>
                <span
                  ><strong>UNESCO Project</strong> — Advocating scientific
                  parenting among young couples</span
                >
              </li>
            </ul>
            <p
              class="text-base md:text-lg text-gray-700 leading-relaxed mt-2 max-w-2xl"
            >
              <span class="font-semibold text-teal-700">Dr. Elaine</span> has
              trained parents and teachers in 10+ countries, presented at global
              education summits, and built award-winning platforms like
              <span class="font-semibold">Parents First</span>,
              <span class="font-semibold">ProMizzion</span>,
              <span class="font-semibold">KidZutopia</span>, and
              <span class="font-semibold">DeEmcee</span>.
            </p>
            <figure
              class="mt-4 rounded-2xl border border-gray-200 bg-white/90 p-6 shadow-md flex flex-col gap-2"
            >
              <blockquote
                class="text-gray-800 text-lg md:text-xl leading-relaxed italic"
              >
                "I thought it would be another seminar. Instead, it felt like a
                mirror. I finally saw how my child and I shaped each other."
              </blockquote>
              <figcaption class="mt-2 text-sm text-gray-600 text-right">
                — Jason
              </figcaption>
            </figure>
          </div>
        </div>
      </div>
      <style>
        #trust-4q .rounded-4xl {
          border-radius: 2.25rem;
        }
        #trust-4q .shadow-3xl {
          box-shadow: 0 12px 48px 0 rgba(80, 60, 180, 0.13),
            0 2px 8px 0 rgba(0, 0, 0, 0.04);
        }
        @media (max-width: 768px) {
          #trust-4q .flex-row {
            flex-direction: column;
          }
        }
      </style>
    </section>

    <section
      class="section-pad bg-gradient-to-br from-purple-50 to-teal-50"
      id="coach"
    >
      <div class="max-w-6xl mx-auto px-4 space-y-12 reveal">
        <div class="text-center space-y-4">
          <h2 class="text-3xl md:text-4xl font-extrabold balance">
            🎓 Who's leading the program?
          </h2>
          <p class="text-gray-600 max-w-2xl mx-auto leading-7">
            The program is personally led by instructors with interdisciplinary
            backgrounds and substantial clinical and educational experience,
            integrating insights from neuroscience, psychology, and parent–child
            interaction.
          </p>
        </div>
        <!-- Profile Header -->
        <div class="grid lg:grid-cols-3 gap-10 items-start">
          <div class="lg:col-span-1">
            <div
              aria-label="查看 羅苡玲博士 Dr. Elaine Loo 大图"
              class="relative rounded-3xl overflow-hidden shadow-xl bg-white transition-transform duration-500 will-change-transform hover:shadow-2xl"
              id="elaine-tilt"
              role="button"
              tabindex="0"
            >
              <div
                aria-hidden="true"
                class="pointer-events-none absolute -inset-6 bg-gradient-to-br from-purple-300/20 via-teal-300/10 to-transparent blur-2xl rounded-[28px]"
              ></div>
              <div
                aria-hidden="true"
                class="pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-300"
                id="elaine-shine"
              ></div>
              <img
                alt="羅苡玲博士 Dr. Elaine Loo 肖像"
                class="w-full h-full object-cover select-none"
                id="elaine-img"
                src="assets/elaineloo.jpg"
              />
              <div
                class="absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/70 to-transparent p-5 text-white"
              >
                <h3 class="text-xl font-bold">羅苡玲博士 Dr. Elaine Loo</h3>
                <p class="text-sm mt-1">
                  教育系博士｜认知科学学者｜亲子与心理治疗师
                </p>
              </div>
            </div>
          </div>
          <div class="lg:col-span-2 space-y-6">
            <section
              class="rounded-3xl border border-gray-100 shadow-sm overflow-hidden bg-white"
              data-refined="elaine"
            >
              <div
                class="bg-gradient-to-r from-purple-600 to-teal-500 text-white px-6 py-6 md:px-8 md:py-8"
              >
                <div class="flex items-center gap-4">
                  <div>
                    <h3 class="text-2xl md:text-3xl font-black leading-tight">
                      About Dr. Elaine Loo
                      <span class="opacity-90">(罗苡玲博士)</span>
                    </h3>
                    <p class="mt-1 text-white/90 text-sm md:text-base">
                      Malaysia's leading voice in parenting science and
                      transformation
                    </p>
                  </div>
                </div>
              </div>
              <div class="p-6 md:p-8">
                <div class="space-y-6 md:space-y-8">
                  <article
                    class="rounded-2xl border border-gray-100 p-6 shadow-[0_6px_16px_-6px_rgba(0,0,0,0.1)]"
                  >
                    <h4 class="text-lg font-bold mb-3 flex items-center gap-2">
                      <span class="text-purple-600">🎓</span> Education &amp;
                      Training
                    </h4>
                    <ul
                      class="space-y-2 text-gray-700 leading-7 list-disc pl-5"
                    >
                      <li>PhD in Education, University of Malaya</li>
                      <li>Master in Psychology, East Bridge University</li>
                      <li>
                        First-Class Honours, Accounting &amp; Finance, Anglia
                        Ruskin University (UK)
                      </li>
                      <li>
                        Certified National Vocational Training Officer
                        (Malaysia)
                      </li>
                      <li>
                        Certified Psychotherapist by Malaysian Psychotherapy
                        Association (GPL – PM 291)
                      </li>
                      <li>
                        Certified HRD Corp Trainer for Self-Awareness &amp;
                        Leadership
                      </li>
                      <li>
                        Fellowship Member, Complementary Medicine Association
                        (UK)
                      </li>
                    </ul>
                  </article>
                  <article
                    class="rounded-2xl border border-gray-100 p-6 shadow-[0_6px_16px_-6px_rgba(0,0,0,0.1)]"
                  >
                    <h4 class="text-lg font-bold mb-3 flex items-center gap-2">
                      <span class="text-amber-600">🏆</span> Awards &amp;
                      Recognition
                    </h4>
                    <ul
                      class="space-y-2 text-gray-700 leading-7 list-disc pl-5"
                    >
                      <li>
                        Best Curriculum Design Innovation Award 2025 – Finland
                        CCE
                      </li>
                      <li>ASEAN Professional Award 2023</li>
                      <li>
                        Featured in Britishpedia Successful People in Malaysia
                      </li>
                      <li>
                        Top 15 Most Influential Education Figure in Malaysia
                      </li>
                    </ul>
                  </article>
                  <article
                    class="rounded-2xl border border-gray-100 p-6 shadow-[0_6px_16px_-6px_rgba(0,0,0,0.1)]"
                  >
                    <h4 class="text-lg font-bold mb-3 flex items-center gap-2">
                      <span class="text-teal-600">🌍</span> Global Contributions
                    </h4>
                    <ul
                      class="space-y-2 text-gray-700 leading-7 list-disc pl-5"
                    >
                      <li>
                        Speaker at international summits and symposium in
                        Austria, Finland, India, and more
                      </li>
                      <li>
                        Author of <em>Prison Child</em> &amp;
                        <em>Prison Parent</em>
                      </li>
                      <li>
                        Fellowship Member, International Strategic Institute
                      </li>
                      <li>
                        Developer of the 5Q MindVehicle Framework, impacting
                        100,000+ parents and educators worldwide
                      </li>
                      <li>
                        Board-Certified Family Therapist conferred by MPA Child
                        Psychology and Family Therapy Board
                      </li>
                      <li>
                        Lead-Advocate for UNESCO Project to advocate scientific
                        parenting using MindVehicle among young families
                      </li>
                    </ul>
                  </article>
                </div>
                <div
                  class="mt-8 rounded-2xl bg-gray-50 border border-gray-100 p-6"
                >
                  <p class="text-gray-800 text-base md:text-lg leading-8">
                    <span class="font-semibold"
                      >➡️ When you learn from Dr. Elaine</span
                    >, you're not just attending a workshop — you are
                    experiencing from Malaysia's leading voice in parenting
                    science and transformation.
                  </p>
                </div>
              </div>
            </section>
          </div>
        </div>
        <div
          class="gap-10 reveal grid md:grid-cols-2 lg:grid-cols-3 gap-10 items-start"
          id="chanfong"
        >
          <div class="md:col-span-1 lg:col-span-1">
            <div
              aria-label="查看 陈峰 Chan Fong 大图"
              class="relative rounded-3xl overflow-hidden shadow-xl bg-white transition-transform duration-500 will-change-transform hover:shadow-2xl"
              id="chanfong-tilt"
              role="button"
              tabindex="0"
            >
              <div
                aria-hidden="true"
                class="pointer-events-none absolute -inset-6 bg-gradient-to-br from-purple-300/20 via-teal-300/10 to-transparent blur-2xl rounded-[28px]"
              ></div>
              <div
                aria-hidden="true"
                class="pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-300"
                id="cf-shine"
              ></div>
              <img
                alt="电台DJ 陈峰 Chan Fong 肖像"
                class="w-full h-full object-cover select-none"
                id="chanfong-img"
                src="assets/chanfong.jpeg"
              />
              <div
                class="absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/70 to-transparent p-5 text-white"
              >
                <h3 class="text-xl font-bold">Chan Fong (陈峰)</h3>
                <p class="text-sm mt-1">Guest Speaker | Radio DJ</p>
              </div>
            </div>
          </div>
          <div class="space-y-6 md:col-span-1 lg:col-span-2">
            <div
              class="rounded-2xl bg-white/80 backdrop-blur-xl border border-purple-100/60 shadow-lg p-7 md:p-8 flex flex-col gap-4 transition hover:shadow-xl hover:border-purple-200"
            >
              <div class="flex items-center gap-3 mb-2">
                <span
                  class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 via-teal-300 to-orange-300 text-white text-xl shadow ring-2 ring-white/60"
                  >🎤</span
                >
                <span
                  class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-gradient-to-r from-purple-500/10 to-teal-500/10 border border-purple-400/20 text-sm font-semibold text-purple-700"
                  >Guest Speaker</span
                >
              </div>
              <h3
                class="text-2xl md:text-3xl font-extrabold text-gray-900 tracking-tight mb-3"
              >
                Radio DJ 陈峰 Chan Fong
              </h3>
              <div
                class="flex flex-col gap-3 text-gray-800 w-full"
                id="chanfong-list"
                style="
                  display: grid;
                  grid-template-columns: 1fr;
                  row-gap: 0.75rem;
                  column-gap: 0;
                "
              >
                <p class="text-base md:text-lg leading-relaxed">
                  For more than 25 years, Chan Fong has been a trusted voice in
                  Malaysian homes — inspiring listeners through 988 FM's morning
                  show
                  <span class="font-semibold text-purple-700">"早点UP"</span>
                  and his heartfelt late-night program
                  <span class="font-semibold text-teal-700">"大城心事"</span>.
                </p>
                <p
                  class="italic text-gray-600 text-base md:text-lg border-l-4 border-purple-200 pl-4 mt-2"
                >
                  "When parents hear Chan Fong's voice, they feel understood.
                  Now, for the first time, you can learn directly from him
                  alongside Dr. Elaine in the PlayLab experience."
                </p>
              </div>
            </div>
            <div class="space-y-4">
              <div
                class="rounded-2xl bg-white shadow-sm border border-gray-100 p-5"
              >
                <div class="text-xs text-gray-400 opacity-80">
                  （** Featuring in Penang and Selangor 4Q Mirror Playlab )
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section
      class="section-pad bg-gradient-to-b from-white to-purple-50/40"
      id="voices"
    >
      <div class="max-w-6xl mx-auto px-4">
        <header class="flex items-center gap-3 mb-6">
          <span
            aria-hidden="true"
            class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 via-teal-400 to-orange-400 text-white text-2xl shadow ring-2 ring-white/60"
            >💬</span
          >
          <h2
            class="text-3xl md:text-4xl font-extrabold tracking-tight text-gray-900 pt-7"
          >
            Voices from Parents
          </h2>
        </header>
        <div class="space-y-6">
          <figure
            class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm"
          >
            <blockquote
              class="text-gray-800 text-lg md:text-xl leading-relaxed italic"
            >
              "After PlayLab, I finally understood my child's emotional world. I
              feel like I grew up alongside him."
            </blockquote>
            <figcaption class="mt-3 text-sm text-gray-600">
              — Mei Ling, KL
            </figcaption>
          </figure>
          <figure
            class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm"
          >
            <blockquote
              class="text-gray-800 text-lg md:text-xl leading-relaxed italic"
            >
              "I came for my child, but I left with a 4Q framework for his
              present and future."
            </blockquote>
            <figcaption class="mt-3 text-sm text-gray-600">
              — Daniel, Penang
            </figcaption>
          </figure>
          <figure
            class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm"
          >
            <blockquote
              class="text-gray-800 text-lg md:text-xl leading-relaxed italic"
            >
              "It's rare to find something that speaks to both mothers and
              fathers. This isn't theory — it's practice, reflection, and real
              change."
            </blockquote>
            <figcaption class="mt-3 text-sm text-gray-600">— Aisha</figcaption>
          </figure>
        </div>
      </div>
    </section>
    <section
      class="section-pad bg-gradient-to-b from-teal-50 via-white to-purple-50"
      id="what-you-get"
    >
      <div class="max-w-6xl mx-auto px-4">
        <header class="flex items-center gap-3 mb-6">
          <span
            aria-hidden="true"
            class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br from-teal-500 via-purple-400 to-orange-400 text-white text-2xl shadow ring-2 ring-white/60"
            >🎁</span
          >
          <h2
            class="text-3xl md:text-4xl font-extrabold tracking-tight text-gray-900 pt-7"
          >
            What You'll Get in 2 Days
          </h2>
        </header>
        <div
          class="rounded-2xl border border-gray-200 bg-white p-6 md:p-8 shadow-sm"
        >
          <ul class="space-y-3 text-base md:text-lg text-gray-800 leading-8">
            <li>
              ✅ Your personalized EQ response type so you know how to handle
              children's tantrum
            </li>
            <li>
              ✅ Your personalized IQ type with 11x methods to unlock your speed
              of learning and applying
            </li>
            <li>
              ✅ Your personalized AQ type to handle 21st century smart children
            </li>
            <li>
              ✅ Understand your THREE main SQ triggered and motivational
              psychological reasons
            </li>
            <li>✅ 8+ practical parenting tools you can use immediately</li>
            <li>
              ✅ 72 ways to unleash your child's 9 Multiple Intelligences with
              ease and fun
            </li>
            <li>
              ✅ Access to a community of 4Q parents who support each other
              after the event
            </li>
          </ul>
          <div
            class="mt-6 rounded-xl bg-gray-50 border border-gray-200 p-5 md:p-6"
          >
            <p class="text-gray-800 text-base md:text-lg leading-8 text-center">
              This isn't just knowledge. It's experience and an upgrade to your
              <span class="font-semibold text-purple-700">4Q MindVehicle</span>
              you take home.
            </p>
          </div>
          <div class="mt-6 text-center">
            <a class="btn btn--primary" href="#register">Secure My Seat</a>
          </div>
        </div>
      </div>
    </section>
    <section
      class="section-pad bg-gradient-to-b from-white via-teal-50/40 to-purple-50/40"
      id="science"
    >
      <div class="max-w-6xl mx-auto px-4">
        <header class="flex items-center gap-3 mb-6">
          <span
            aria-hidden="true"
            class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br from-teal-500 via-purple-400 to-orange-400 text-white text-2xl shadow ring-2 ring-white/60"
            >📊</span
          >
          <h2
            class="text-3xl md:text-4xl font-extrabold tracking-tight text-gray-900 pt-7"
          >
            The Science is Clear
          </h2>
        </header>
        <div
          class="rounded-2xl border border-gray-200 bg-white p-6 md:p-8 shadow-sm"
        >
          <ul class="space-y-3 text-base md:text-lg text-gray-800 leading-8">
            <li>
              📌 <strong>Harvard University:</strong> EQ at age 5 predict life
              success better than IQ.
            </li>
            <li>
              📌 <strong>American Psychological Association:</strong> Children
              with involved fathers show 33% higher resilience and confidence.
            </li>
            <li>
              📌 <strong>World Economic Forum 2025:</strong> In the AI economy,
              emotional regulation (EQ), adaptability (AQ), and social
              meaning-making (SQ) are ranked as the top future skills.
            </li>
          </ul>
          <p class="mt-6 text-gray-800 text-base md:text-lg leading-8">
            <span class="font-semibold">PlayLab</span> is the first in Malaysia
            to combine all <span class="font-semibold">4Q</span> into one
            practical system.
          </p>
          <div
            class="mt-6 rounded-xl bg-gray-50 border border-gray-200 p-5 md:p-6"
          >
            <p class="text-gray-800 text-base md:text-lg leading-8">
              This is not just a workshop. It's a once-in-a-generation movement
              to future-proof Malaysian families.
            </p>
          </div>
          <div class="mt-8 grid md:grid-cols-3 gap-4">
            <div
              class="rounded-2xl border-2 border-yellow-300 bg-yellow-50/80 shadow-lg p-6 flex flex-col items-center gap-2 hover:scale-105 transition-transform duration-300 group cursor-pointer animate-pulse-slow"
            >
              <div class="text-2xl mb-1 animate-bounce">🎉</div>
              <div class="text-base font-bold text-yellow-700">Early Bird</div>
              <div class="text-2xl font-extrabold text-yellow-900 drop-shadow">
                RM1,480
              </div>
              <div
                class="text-sm text-yellow-700 font-semibold bg-yellow-200/70 rounded-full px-3 py-1 mt-1 animate-pulse"
              >
                Save RM1,120
              </div>
            </div>
            <div
              class="rounded-2xl border-2 border-purple-300 bg-purple-50/80 shadow-lg p-6 flex flex-col items-center gap-2 hover:scale-105 transition-transform duration-300 group cursor-pointer animate-pulse-slow"
            >
              <div class="text-2xl mb-1 animate-bounce">🎟️</div>
              <div class="text-base font-bold text-purple-700">Limit</div>
              <div class="text-2xl font-extrabold text-purple-900 drop-shadow">
                Only 1,000 Seats
              </div>
              <div
                class="text-sm text-purple-700 font-semibold bg-purple-200/70 rounded-full px-3 py-1 mt-1 animate-pulse"
              >
                Spaces disappearing fast
              </div>
            </div>
            <div
              class="rounded-2xl border-2 border-teal-300 bg-teal-50/80 shadow-lg p-6 flex flex-col items-center gap-2 hover:scale-105 transition-transform duration-300 group cursor-pointer animate-pulse-slow"
            >
              <div class="text-2xl mb-1 animate-bounce">⏳</div>
              <div class="text-base font-bold text-teal-700">Urgency</div>
              <div
                class="text-base md:text-lg font-semibold text-teal-900 text-center"
              >
                The first 6 years of your child's life won't wait.<br /><span
                  class="text-teal-700 font-bold"
                  >Neither should you.</span
                >
              </div>
            </div>
            <style>
              @keyframes pulse-slow {
                0%,
                100% {
                  box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.18),
                    0 0 0 0 rgba(168, 85, 247, 0.12),
                    0 0 0 0 rgba(20, 184, 166, 0.12);
                }
                50% {
                  box-shadow: 0 0 24px 8px rgba(251, 191, 36, 0.18),
                    0 0 24px 8px rgba(168, 85, 247, 0.12),
                    0 0 24px 8px rgba(20, 184, 166, 0.12);
                }
              }
              .animate-pulse-slow {
                animation: pulse-slow 2.8s cubic-bezier(0.4, 0, 0.6, 1) infinite;
              }
            </style>
          </div>
          <div class="mt-6 text-center">
            <a class="btn btn--primary" href="#register"
              >Secure My Early Bird Seat Now</a
            >
          </div>
        </div>
      </div>
    </section>

    <section
      class="section-pad bg-gradient-to-b from-teal-50 via-white to-purple-50"
      id="cta"
    >
      <div class="max-w-6xl mx-auto px-4">
        <header class="flex items-center gap-3 mb-6">
          <span
            aria-hidden="true"
            class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 via-teal-400 to-orange-400 text-white text-2xl shadow ring-2 ring-white/60"
            >🚀</span
          >
          <h2
            class="text-3xl md:text-4xl font-extrabold tracking-tight text-gray-900 pt-7"
          >
            Call to Action
          </h2>
        </header>
        <div
          class="rounded-2xl border border-gray-200 bg-white p-6 md:p-8 shadow-sm"
        >
          <p class="text-base md:text-lg text-gray-800 leading-8">
            Don't just attend another parenting course. Join the movement that
            rewrites parenting in Malaysia.
          </p>
          <ul
            class="mt-4 space-y-3 text-base md:text-lg text-gray-800 leading-8"
          >
            <li>
              ✅ Equip your family with science-backed tools for the AI world
            </li>
            <li>✅ Strengthen your bond as father, mother, and child</li>
          </ul>
          <div class="mt-6 text-center">
            <a class="btn btn--primary" href="#register"
              >I'm Ready to Lead my Family into the Future</a
            >
          </div>
        </div>
      </div>
    </section>

    <section
      class="section-pad bg-white anim-fade"
      id="register"
      style="--anim-delay: 0.2s"
    >
      <div class="max-w-5xl mx-auto px-4 reveal">
        <h2 class="text-3xl md:text-4xl font-bold text-center mb-8 balance">
          Registration
        </h2>
        <form
          class="card card-lg grid md:grid-cols-2 gap-6 sm:gap-5"
          id="register-form"
          novalidate=""
          onsubmit="handleRegistrationSubmit(event)"
        >
          <!-- 简单反机器人蜜罐字段（正常用户不可见，若被填则视为垃圾提交） -->
          <div aria-hidden="true" style="display: none !important">
            <label
              >Please do not fill this field:<input
                autocomplete="off"
                name="hp_field"
                tabindex="-1"
                type="text"
            /></label>
          </div>
          <div>
            <label class="font-medium" for="rf-name">Name:</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-name"
              name="name"
              placeholder="Please enter"
              type="text"
            />
          </div>
          <div>
            <label class="font-medium" for="rf-phone">Phone Number:</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-phone"
              name="phone"
              placeholder="Please enter"
              type="text"
            />
          </div>
          <div>
            <label class="font-medium" for="rf-email">Email Address:</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-email"
              name="email"
              placeholder="Please enter"
              type="email"
            />
          </div>
          <div>
            <label class="font-medium" for="rf-ic">IC Number:</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-ic"
              name="icNumber"
              placeholder="Please enter"
              type="text"
            />
          </div>
          <div class="md:col-span-2">
            <label class="font-medium" for="rf-address">Home Address:</label
            ><textarea
              class="mt-2 w-full rounded-lg"
              id="rf-address"
              name="address"
              placeholder="Please enter"
              rows="3"
            ></textarea>
          </div>
          <div>
            <label class="font-medium" for="rf-session">Session:</label>
            <select
              class="mt-2 w-full rounded-lg"
              id="rf-session"
              name="session"
            >
              <option value="Penang · 4 &amp; 5 October 2025（9am - 5pm）">
                Penang · 4 &amp; 5 October 2025（9am - 5pm）
              </option>
              <option value="Johor · 18 &amp; 19 October 2025（9am - 5pm）">
                Johor · 18 &amp; 19 October 2025（9am - 5pm）
              </option>
              <option value="Selangor · 29 &amp; 30 November 2025（9am - 5pm）">
                Selangor · 29 &amp; 30 November 2025（9am - 5pm）
              </option>
            </select>
            <div class="mt-2 text-right">
              <!-- <button type="button" id="pay-now" class="inline-flex items-center gap-2 text-sm font-semibold text-purple-700 hover:text-purple-900">
                        立即付款 <span aria-hidden="true">→</span>
                        </button> -->
            </div>
          </div>
          <div>
            <label class="font-medium" for="rf-marital">Marital Status</label>
            <select
              class="mt-2 w-full rounded-lg"
              id="rf-marital"
              name="maritalStatus"
            >
              <option value="已婚">Married</option>
              <option value="未婚">Single</option>
            </select>
          </div>
          <div class="md:col-span-2">
            <label class="font-medium" for="rf-child-age"
              >Child's Age: (If none, please enter NO)</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-child-age"
              name="childAge"
              placeholder="e.g. 3 / NO"
              type="text"
            />
          </div>
          <div>
            <label class="font-medium" for="rf-occupation">Occupation:</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-occupation"
              name="occupation"
              placeholder="Please enter"
              type="text"
            />
          </div>
          <div class="md:col-span-2">
            <label class="font-medium" for="rf-referral"
              >How did you hear about 4Q Mirror Playlab?</label
            >
            <select
              class="mt-2 w-full rounded-lg"
              id="rf-referral"
              name="referralSource"
            >
              <option value="">Please select</option>
              <option value="Facebook &amp; Instagram">
                Facebook &amp; Instagram
              </option>
              <option value="Family &amp; Friends">Family &amp; Friends</option>
              <option value="Deemcee">Deemcee</option>
              <option value="Kidzutopia">Kidzutopia</option>
              <option value="Others">Others</option>
            </select>
          </div>
          <div class="hidden md:col-span-2" id="rf-referral-other-wrap">
            <label class="font-medium" for="rf-referral-other"
              >If Others, please specify:</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-referral-other"
              name="referralOther"
              placeholder="Please enter"
              type="text"
            />
          </div>
          <div class="hidden md:col-span-2" id="rf-referral-friend-wrap">
            <label class="font-medium" for="rf-referral-friend"
              >If Family/Friends, please provide their info</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-referral-friend"
              name="referralFriend"
              placeholder="Aileen, 011-234567"
              type="text"
            />
          </div>
          <div class="hidden md:col-span-2" id="rf-referral-deemcee-wrap">
            <label class="font-medium" for="rf-referral-deemcee"
              >If Deemcee, please select branch:</label
            >
            <select
              class="mt-2 w-full rounded-lg"
              id="rf-referral-deemcee"
              name="referralDeemcee"
            >
              <option value="">Please select branch</option>
              <option value="Deemcee Aman Suria, PJ">
                Deemcee Aman Suria, PJ
              </option>
              <option value="Deemcee Anggun City, Rawang">
                Deemcee Anggun City, Rawang
              </option>
              <option value="Deemcee Bandar Botanic">
                Deemcee Bandar Botanic
              </option>
              <option value="Deemcee Bandar Kinrara, Puchong">
                Deemcee Bandar Kinrara, Puchong
              </option>
              <option value="Deemcee Bandar Puteri, Puchong">
                Deemcee Bandar Puteri, Puchong
              </option>
              <option value="Deemcee Bandar Rimbayu">
                Deemcee Bandar Rimbayu
              </option>
              <option value="Deemcee Bandar Sri Damansara">
                Deemcee Bandar Sri Damansara
              </option>
              <option value="Deemcee Bayan Lepas, Penang">
                Deemcee Bayan Lepas, Penang
              </option>
              <option value="Deemcee Bintulu, Sarawak">
                Deemcee Bintulu, Sarawak
              </option>
              <option value="Deemcee Bukit Mertajam, Penang">
                Deemcee Bukit Mertajam, Penang
              </option>
              <option value="Deemcee C180, Cheras">Deemcee C180, Cheras</option>
              <option value="Deemcee Cyberjaya">Deemcee Cyberjaya</option>
              <option value="Deemcee Eco Majestic, Semenyih">
                Deemcee Eco Majestic, Semenyih
              </option>
              <option value="Deemcee Eight Mile Plains">
                Deemcee Eight Mile Plains
              </option>
              <option value="Deemcee Horizon Hills">
                Deemcee Horizon Hills
              </option>
              <option value="Deemcee Jade Hills, Kajang">
                Deemcee Jade Hills, Kajang
              </option>
              <option value="Deemcee Kepong Baru">Deemcee Kepong Baru</option>
              <option value="Deemcee Kota Damansara">
                Deemcee Kota Damansara
              </option>
              <option value="Deemcee Kota Syahbandar">
                Deemcee Kota Syahbandar
              </option>
              <option value="Deemcee Kota Kemuning">
                Deemcee Kota Kemuning
              </option>
              <option value="Deemcee Kuala Terengganu">
                Deemcee Kuala Terengganu
              </option>
              <option value="Deemcee Miri, Sarawak">
                Deemcee Miri, Sarawak
              </option>
              <option value="Deemcee Mount Austin">Deemcee Mount Austin</option>
              <option value="Deemcee Pine Square, Kuching">
                Deemcee Pine Square, Kuching
              </option>
              <option value="Deemcee Saradise, Kuching">
                Deemcee Saradise, Kuching
              </option>
              <option value="Deemcee Seremban 2">Deemcee Seremban 2</option>
              <option value="Deemcee Setia Alam, Selangor">
                Deemcee Setia Alam, Selangor
              </option>
              <option value="Deemcee Setia Taipan">Deemcee Setia Taipan</option>
              <option value="Deemcee Sibu, Sarawak">
                Deemcee Sibu, Sarawak
              </option>
              <option value="Deemcee Simpang Ampat, Penang">
                Deemcee Simpang Ampat, Penang
              </option>
              <option value="Deemcee Sri Petaling">Deemcee Sri Petaling</option>
              <option value="Deemcee Sungai Abong, Muar">
                Deemcee Sungai Abong, Muar
              </option>
              <option value="Deemcee Taman Danau Kota, Setapak">
                Deemcee Taman Danau Kota, Setapak
              </option>
              <option value="Deemcee Taman Segar, Cheras">
                Deemcee Taman Segar, Cheras
              </option>
              <option value="Deemcee Taman Sutera Skudai">
                Deemcee Taman Sutera Skudai
              </option>
              <option value="Deemcee USJ Taipan">Deemcee USJ Taipan</option>
            </select>
          </div>
          <div
            class="partner-coming-card bg-gradient-to-r from-purple-50 to-teal-50 border-2 border-purple-200/50 rounded-2xl p-4 mb-2 flex items-center gap-4 shadow-sm"
          >
            <span
              class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-purple-100 text-purple-600 text-2xl mr-2"
            >
              <svg fill="none" height="24" viewbox="0 0 24 24" width="24">
                <path
                  d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
                  fill="currentColor"
                ></path>
              </svg>
            </span>
            <div class="flex-1">
              <label
                class="font-extrabold text-lg text-gray-900 mb-1 block"
                for="rf-partner-coming"
                >Are you coming with your partner/spouse?</label
              >
              <select
                class="mt-2 w-full rounded-lg border-2 border-purple-200 bg-white text-base font-semibold text-purple-700 focus:ring-2 focus:ring-purple-400 transition"
                id="rf-partner-coming"
                name="partnerComing"
              >
                <option selected="" value="否">No</option>
                <option value="是">Yes</option>
              </select>
              <p class="mt-1 text-xs text-gray-500">
                Select "Yes" to add your spouse to the registration; the system
                will automatically calculate the total fee.
              </p>
              <div class="mt-3">
                <label
                  class="font-semibold text-base text-gray-900 mb-1 block"
                  for="pay-original-price"
                  >Select Early Bird rate?</label
                >
                <select
                  id="pay-original-price"
                  name="payOriginalPrice"
                  class="mt-1 w-full rounded-lg border-2 border-orange-200 bg-white text-base font-semibold text-orange-700 focus:ring-2 focus:ring-orange-400 transition"
                >
                  <option value="yes" selected>
                    Yes (Early Bird Discount)
                  </option>
                  <option value="no">No (Pay Standard Price)</option>
                </select>
                <p class="mt-1 text-xs text-orange-600">
                  Selecting "No" will charge the standard price: Single RM2,808,
                  With Spouse RM3,348 (inclusive of 8% SST)
                </p>
              </div>
            </div>
          </div>
          <div class="partner-field hidden">
            <label class="font-medium" for="rf-partner-name"
              >Partner Name:</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-partner-name"
              name="partnerName"
              type="text"
            />
          </div>
          <div class="partner-field hidden">
            <label class="font-medium" for="rf-partner-ic"
              >Partner IC Number：</label
            ><input
              id="rf-partner-ic"
              name="partnerIC"
              type="text"
              class="mt-2 w-full rounded-lg"
            />
          </div>
          <div class="partner-field hidden">
            <label class="font-medium" for="rf-partner-phone"
              >Partner Phone Number:</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-partner-phone"
              name="partnerPhone"
              type="text"
            />
          </div>
          <div class="partner-field hidden md:col-span-2">
            <label class="font-medium" for="rf-partner-email"
              >Partner Email Address:</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-partner-email"
              name="partnerEmail"
              type="email"
            />
          </div>
          <div class="partner-field hidden md:col-span-2">
            <label class="font-medium" for="rf-partner-occupation"
              >Partner Occupation:</label
            ><input
              class="mt-2 w-full rounded-lg"
              id="rf-partner-occupation"
              name="partnerOccupation"
              type="text"
            />
          </div>
          <!-- Payment Summary & Proof Upload -->
          <div
            class="md:col-span-2 group rounded-2xl border border-teal-200/60 bg-white/70 backdrop-blur-sm shadow-sm p-5 sm:p-4 transition hover:shadow-md hover:border-teal-300"
            id="payment-card"
          >
            <div class="mb-7">
              <div
                class="modern-pay-card relative bg-gradient-to-br from-purple-50 via-white to-teal-50 border-2 border-purple-200/60 shadow-lg rounded-2xl p-6 md:p-8 flex flex-col gap-5"
              >
                <div class="flex items-center gap-3 mb-2">
                  <span
                    class="inline-flex items-center justify-center w-11 h-11 rounded-full bg-purple-100 text-purple-600 text-2xl"
                  >
                    <svg fill="none" height="28" viewbox="0 0 28 28" width="28">
                      <rect fill="#7c3aed" height="28" rx="8" width="28"></rect>
                      <path
                        d="M8.5 18.5L11.5 9.5H14.5L11.5 18.5H8.5ZM16.5 18.5L19.5 9.5H22.5L19.5 18.5H16.5Z"
                        fill="#fff"
                      ></path>
                    </svg>
                  </span>
                  <label
                    class="font-extrabold text-xl md:text-2xl text-gray-900 tracking-tight"
                    >Payment Method / 请选择付款方式</label
                  >
                </div>
                <div class="flex flex-wrap gap-5">
                  <label
                    class="payment-radio group flex-1 min-w-[180px] max-w-xs inline-flex items-center gap-3 px-5 py-4 rounded-2xl border-2 border-gray-200 bg-white/80 cursor-pointer transition-all text-lg font-semibold hover:border-teal-400 focus-within:border-teal-500 shadow-sm"
                  >
                    <input
                      checked=""
                      class="accent-teal-600 w-6 h-6"
                      id="pay-method-bank"
                      name="paymentMethod"
                      type="radio"
                      value="bank"
                    />
                    <span
                      class="text-gray-800 text-base md:text-lg font-bold flex items-center gap-2"
                    >
                      <svg
                        fill="none"
                        height="20"
                        viewbox="0 0 20 20"
                        width="20"
                      >
                        <rect
                          fill="#06b6d4"
                          height="20"
                          rx="5"
                          width="20"
                        ></rect>
                        <path
                          d="M5 14L8 6h3l-3 8H5zm5 0l3-8h3l-3 8h-3z"
                          fill="#fff"
                        ></path>
                      </svg>
                      Bank Transfer / QR
                    </span>
                  </label>
                  <label
                    class="payment-radio group flex-1 min-w-[180px] max-w-xs inline-flex items-center gap-3 px-5 py-4 rounded-2xl border-2 border-purple-300 bg-gradient-to-r from-purple-50 to-teal-50 cursor-pointer transition-all text-lg font-semibold hover:border-purple-400 focus-within:border-purple-500 shadow-md"
                  >
                    <input
                      class="accent-purple-600 w-6 h-6"
                      id="pay-method-stripe"
                      name="paymentMethod"
                      type="radio"
                      value="stripe"
                    />
                    <span
                      class="text-purple-800 flex items-center gap-2 font-extrabold text-base md:text-lg"
                    >
                      <svg
                        fill="none"
                        height="22"
                        viewbox="0 0 32 32"
                        width="22"
                      >
                        <rect
                          fill="#7c3aed"
                          height="32"
                          rx="7"
                          width="32"
                        ></rect>
                        <path
                          d="M10.5 21.5L13.5 10.5H16.5L13.5 21.5H10.5ZM18.5 21.5L21.5 10.5H24.5L21.5 21.5H18.5Z"
                          fill="#fff"
                        ></path>
                      </svg>
                      Stripe Online Payment (Credit Cards/FPX)
                    </span>
                  </label>
                </div>
                <div
                  class="mt-4 text-base text-purple-900 bg-purple-50/80 border-l-4 border-purple-400 rounded-lg px-5 py-3 hidden font-semibold shadow-sm"
                  id="stripe-hint"
                >
                  <span class="text-gray-500 text-sm"
                    >(Submit the form and you'll be redirected to Stripe to
                    pay)</span
                  >
                </div>
              </div>
            </div>
            <h3
              class="text-lg md:text-xl font-extrabold text-gray-900 flex items-center gap-2"
            >
              Payment Info
            </h3>
            <p class="mt-2 text-sm text-gray-700">
              Please indicate whether your spouse/partner will attend; the
              system will automatically calculate the total amount due.<span
                id="payment-info-chk"
                >Then complete payment using one of the methods below and upload
                your transfer receipt.</span
              >
            </p>
            <div class="mt-4 grid md:grid-cols-2 gap-6 sm:gap-4">
              <!-- Amount breakdown -->
              <div
                class="rounded-xl bg-gradient-to-br from-teal-50/60 to-emerald-50/50 p-4 ring-1 ring-teal-200/50"
              >
                <div class="flex items-start justify-between">
                  <div>
                    <span
                      class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-teal-100 text-teal-800 text-[10px] font-semibold ring-1 ring-teal-200/60"
                      >Amount</span
                    >
                    <div
                      class="mt-2 text-3xl md:text-4xl font-black text-gray-900"
                    >
                      <span id="pay-total">RM 1,598.40</span>
                    </div>
                  </div>
                  <div
                    class="text-[11px] text-teal-800 bg-teal-100/70 px-2 py-1 rounded-md ring-1 ring-teal-200/60"
                  >
                    Include 8% SST
                  </div>
                </div>
                <div class="mt-3 flex items-center gap-3">
                  <label class="text-xs text-gray-600" for="pay-spouse-select"
                    >Pax</label
                  >
                  <select
                    aria-disabled="true"
                    class="h-9 rounded-lg border-gray-200 text-sm bg-gray-50 text-gray-500 shadow-sm"
                    disabled=""
                    id="pay-spouse-select"
                  >
                    <option selected="" value="single">1 pax</option>
                    <option value="with">With（Spouse）</option>
                  </select>
                </div>
                <!-- <p class="mt-1 text-[11px] text-gray-500">此人数将根据上方"与另一半一起来：是/否"自动同步。</p> -->
                <div class="mt-3 flex flex-wrap gap-2 hidden">
                  <span
                    class="inline-flex items-center gap-1 px-2.5 py-1 rounded-full border border-teal-300 bg-teal-50 text-teal-700 text-xs font-semibold"
                    id="chip-base"
                    >1 pax <span class="font-bold">RM 1,598.40</span></span
                  >
                  <span
                    aria-pressed="false"
                    class="inline-flex items-center gap-1 px-2.5 py-1 rounded-full border border-gray-200 bg-white text-gray-500 text-xs font-semibold"
                    id="chip-spouse"
                    >With Spouse <span class="font-bold">RM 540.00</span></span
                  >
                </div>
                <div class="mt-3 text-[12px]">
                  <div class="flex items-center gap-2 text-gray-700 hidden">
                    <span
                      class="inline-block h-1.5 w-1.5 rounded-full bg-teal-500"
                    ></span
                    ><span>Base Price：RM 1,598.40</span>
                  </div>
                  <div class="flex items-center gap-2 mt-1 hidden">
                    <span
                      class="inline-block h-1.5 w-1.5 rounded-full bg-gray-300"
                      id="bd-spouse-dot"
                    ></span
                    ><span class="text-gray-600" id="bd-spouse"
                      >With Spouse: Not Selected</span
                    >
                  </div>
                </div>
                <input
                  id="rf-payment-total"
                  name="paymentTotal"
                  type="hidden"
                  value="1598.40"
                />

                <!-- Promo code area -->
                <div class="mt-4">
                  <label
                    for="promo-code"
                    class="text-sm font-medium text-gray-700"
                    >Promo code</label
                  >
                  <div class="mt-2 flex gap-2">
                    <input
                      id="promo-code"
                      name="promoCode"
                      type="text"
                      placeholder="Key In Promo Code"
                      class="flex-1 rounded-lg border-gray-200 px-3 py-2"
                    />
                    <input
                      type="hidden"
                      id="promo-reservation-id"
                      name="promoReservationId"
                      value=""
                    />
                    <button
                      id="promo-apply"
                      type="button"
                      class="btn btn--light"
                    >
                      Check & Apply
                    </button>
                  </div>
                  <p id="promo-msg" class="mt-2 text-sm text-gray-600"></p>
                </div>
              </div>
              <!-- Bank / QR -->
              <div
                class="rounded-xl p-4 ring-1 ring-gray-200/70 bg-white/70"
                id="payment-bank-info"
              >
                <div class="text-sm font-bold text-gray-800">
                  Bank Transfer:
                </div>
                <ul class="mt-2 text-sm text-gray-800 space-y-1.5 bank-list">
                  <li class="flex items-center justify-between gap-3">
                    <span>银行（Bank）:</span
                    ><span class="font-semibold select-all" id="bank-name"
                      >Alliance Bank</span
                    ><button
                      class="ml-2 text-xs px-2 py-1 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700"
                      data-copy="#bank-name"
                      type="button"
                    >
                      Copy
                    </button>
                  </li>
                  <li class="flex items-center justify-between gap-3">
                    <span>户名（Account Name）:</span
                    ><span class="font-semibold select-all" id="acc-name"
                      >PARENTS FIRST SDN BHD.</span
                    ><button
                      class="ml-2 text-xs px-2 py-1 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700"
                      data-copy="#acc-name"
                      type="button"
                    >
                      Copy
                    </button>
                  </li>
                  <li class="flex items-center justify-between gap-3">
                    <span>账号（Account No）:</span
                    ><span class="font-semibold select-all" id="acc-no"
                      >120420013005463</span
                    ><button
                      class="ml-2 text-xs px-2 py-1 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700"
                      data-copy="#acc-no"
                      type="button"
                    >
                      Copy
                    </button>
                  </li>
                  <li class="text-gray-600">
                    Remark：4Q Mirror PlayLab (Name + City Couese)<br />Example：4Q
                    Mirror PlayLab (Alice, Penang)
                  </li>
                </ul>
                <div class="mt-4">
                  <div class="text-sm font-bold text-gray-800 mb-2">
                    扫码支付（QR）：
                  </div>
                  <div class="relative">
                    <img
                      alt="Payment QR"
                      class="w-48 h-48 object-contain rounded-xl border border-gray-200 bg-white transition hover:scale-[1.02]"
                      decoding="async"
                      id="pay-qr"
                      loading="lazy"
                      src="assets/qr_code_payment.png"
                    />
                  </div>
                  <div class="mt-2 text-xs text-gray-500">
                    tap the qr code to enlarge
                  </div>
                </div>
              </div>
            </div>
            <div class="mt-5 hidden" id="stripe-pay-btn-wrap">
              <a
                class="btn btn--primary w-full sm:w-auto text-center text-lg font-bold py-3"
                href="https://buy.stripe.com/test_14A14nbLmeUH84y1IE3Ru00"
                id="stripe-pay-btn"
                rel="noopener"
                target="_blank"
                >💳 使用 Stripe 在线支付 Pay with Stripe</a
              >
              <p class="mt-2 text-xs text-gray-500">
                支持信用卡、FPX、GrabPay 等。支付后会自动跳转回报名页面。
              </p>
            </div>
            <div class="mt-5" id="bank-proof-wrap">
              <label class="font-medium" for="rf-payment-proof"
                >Upload Payment Proof（image / PDF）：</label
              >
              <input
                accept="image/*,application/pdf"
                class="mt-2 block w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"
                id="rf-payment-proof"
                name="paymentProof"
                type="file"
              />
              <p class="mt-1 text-xs text-gray-500">
                Support JPG/PNG/PDF，Less than 5MB。
              </p>
            </div>
            <script>
              document.addEventListener("DOMContentLoaded", function () {
                var bankRadio = document.getElementById("pay-method-bank");
                var stripeRadio = document.getElementById("pay-method-stripe");
                var bankProof = document.getElementById("bank-proof-wrap");
                var stripeBtn = document.getElementById("stripe-pay-btn-wrap");
                var form = document.getElementById("register-form");
                var submitted = false;
                var stripeHint = document.getElementById("stripe-hint");
                var paymentBankInfo =
                  document.getElementById("payment-bank-info");
                var paymentInfoChk =
                  document.getElementById("payment-info-chk");
                function togglePaymentMethod() {
                  if (stripeRadio.checked) {
                    if (stripeHint) stripeHint.classList.remove("hidden");
                    if (submitted) {
                      stripeBtn.classList.remove("hidden");
                    } else {
                      stripeBtn.classList.add("hidden");
                    }
                    bankProof.classList.add("hidden");
                    if (paymentBankInfo)
                      paymentBankInfo.classList.add("hidden");
                    if (paymentInfoChk) paymentInfoChk.classList.add("hidden");
                  } else {
                    if (stripeHint) stripeHint.classList.add("hidden");
                    stripeBtn.classList.add("hidden");
                    bankProof.classList.remove("hidden");
                    if (paymentBankInfo)
                      paymentBankInfo.classList.remove("hidden");
                    if (paymentInfoChk)
                      paymentInfoChk.classList.remove("hidden");
                  }
                }
                bankRadio.addEventListener("change", togglePaymentMethod);
                stripeRadio.addEventListener("change", togglePaymentMethod);
                togglePaymentMethod();
                // if (form) {
                //   form.addEventListener('submit', function(e) {
                //     // Let the form submit as usual, but after success, show Stripe button if needed
                //     setTimeout(function() {
                //       // Check for a success message or other indicator (customize as needed)
                //       var status = document.getElementById('register-status');
                //       if (stripeRadio.checked && status && /成功|success|已提交|已收到/i.test(status.textContent)) {
                //         submitted = true;

                //       }
                //     }, 300); // Wait for form handler to update status
                //   });
                // }
              });
            </script>
          </div>
          <!-- Terms & Conditions Agreement -->
          <div class="md:col-span-2">
            <label class="inline-flex items-start gap-3">
              <input
                class="mt-1 h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"
                id="rf-terms"
                name="agreeTerms"
                type="checkbox"
              />
              <span class="text-sm text-gray-800">
                I have read and agree to all the terms and conditions.
                <details class="mt-2">
                  <summary
                    class="cursor-pointer text-purple-700 hover:text-purple-900 font-semibold"
                  >
                    View Course Terms
                  </summary>
                  <div
                    class="mt-2 p-4 rounded-lg border border-gray-200 bg-white/80 text-sm leading-7 text-gray-700 space-y-3"
                  >
                    <div class="pt-2 border-t border-gray-200"></div>
                    <div>
                      <p class="font-semibold">Course Terms and Conditions</p>
                      <p class="mt-1">📌 Course Fee</p>
                      <ul class="list-disc pl-6 space-y-1">
                        <li>a. All course fees are non-refundable.</li>
                        <li>
                          b. Full payment is required before attending the
                          course.
                        </li>
                      </ul>
                      <p class="mt-2">📌 Course Date and Time</p>
                      <ul class="list-disc pl-6 space-y-1">
                        <li>a. The organizer may change the date or venue.</li>
                        <li>
                          b. To change your course date, send a written request
                          at least 3 weeks in advance.
                        </li>
                        <li>
                          c. If you miss the course without notice, attendance
                          will be recorded as is.
                        </li>
                        <li>
                          d. Changes within 1 week of the course date will incur
                          a RM350 fee.
                        </li>
                        <li>e. Breakfast and lunch not included.</li>
                      </ul>
                      <p class="mt-2">📌 Media and Copyright</p>
                      <ul class="list-disc pl-6 space-y-1">
                        <li>
                          a. The 4Q Mirror PlayLab will be recorded and
                          photographed. Media may be used on social media or
                          event videos. Inform us if you do not wish to appear.
                        </li>
                        <li>
                          b. No phone use, photography, audio, or video
                          recording during the Exploration Camp. All course
                          content is protected by copyright and may not be used
                          without written permission.
                        </li>
                      </ul>
                    </div>
                  </div>
                </details>
              </span>
            </label>
          </div>
          <div class="md:col-span-2 text-center pt-2">
            <button
              class="btn btn--primary px-8 w-full sm:w-auto"
              id="register-submit"
              type="submit"
            >
              Submit <i class="w-5 h-5" data-lucide="arrow-right"></i>
            </button>
          </div>
          <div class="md:col-span-2 text-center text-sm text-gray-600 mt-1">
            Upon successful registration, you will receive a confirmation alert.
          </div>
          <div
            aria-live="polite"
            class="md:col-span-2 text-center text-sm text-gray-500"
            id="register-status"
          ></div>
        </form>
        <!-- Certification badges (visual trust, no text change) -->
      </div>
    </section>

    <!-- FAQ Section -->
    <section
      id="faq"
      class="section-pad relative overflow-hidden bg-gradient-to-br from-purple-50 via-white to-teal-50"
    >
      <!-- decorative gradient blobs -->
      <div
        class="pointer-events-none absolute -top-24 -left-24 h-72 w-72 rounded-full bg-purple-200/40 blur-3xl"
      ></div>
      <div
        class="pointer-events-none absolute top-1/3 -right-20 h-60 w-60 rounded-full bg-fuchsia-200/30 blur-3xl"
      ></div>
      <div
        class="pointer-events-none absolute -bottom-24 -right-24 h-72 w-72 rounded-full bg-teal-200/40 blur-3xl"
      ></div>
      <div class="max-w-5xl mx-auto px-4 reveal">
        <h2 class="text-3xl md:text-4xl font-extrabold text-center">
          <span class="align-middle">FAQ</span>
        </h2>
        <div class="mt-4 flex items-center justify-center gap-3">
          <button
            id="faq-expand-all"
            type="button"
            class="inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-semibold text-gray-800 bg-white ring-1 ring-gray-200 hover:bg-gray-50"
          >
            <i data-lucide="plus-square" class="w-4 h-4"></i
            ><span>Expand All</span>
          </button>
          <button
            id="faq-collapse-all"
            type="button"
            class="inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-semibold text-gray-800 bg-white ring-1 ring-gray-200 hover:bg-gray-50"
          >
            <i data-lucide="minus-square" class="w-4 h-4"></i
            ><span>Collapse All</span>
          </button>
        </div>

        <!-- FAQ Content -->
        <div class="mt-6 grid md:grid-cols-1 gap-3">
          <!-- Q1 -->
          <details
            class="group rounded-2xl border border-gray-100 bg-white/90 backdrop-blur p-5 shadow-sm cursor-pointer"
          >
            <summary
              class="flex items-start justify-between gap-3 cursor-pointer"
            >
              <div class="text-base md:text-lg font-semibold text-gray-900">
                1. What is the 4Q Mirror PlayLab™️?
              </div>
              <i
                data-lucide="chevron-down"
                class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180"
              ></i>
            </summary>
            <div class="mt-3 text-gray-700 leading-relaxed">
              The 4Q Mirror PlayLab™️ is a practical parenting program that
              integrates neuroscience and psychology, specially designed for
              parents of children aged 0–6. It's not just about "theory" — it's
              about real, hands-on application. You'll learn how to respond to
              your child's emotions, understand developmental logic, and upgrade
              your own Mind Vehicle.
            </div>
          </details>

          <!-- Q2 -->
          <details
            class="group rounded-2xl border border-gray-100 bg-white/90 backdrop-blur p-5 shadow-sm cursor-pointer"
          >
            <summary
              class="flex items-start justify-between gap-3 cursor-pointer"
            >
              <div class="text-base md:text-lg font-semibold text-gray-900">
                2. I've already read many parenting books and watched videos. Do
                I still need this course?
              </div>
              <i
                data-lucide="chevron-down"
                class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180"
              ></i>
            </summary>
            <div class="mt-3 text-gray-700 leading-relaxed space-y-2">
              <p>
                📚 Books and videos provide information — but the real challenge
                in parenting is transformation.
              </p>
              <p>
                In PlayLab, you'll learn how to turn knowledge into action, so
                you no longer stay stuck at "I know, but I can't do it."
              </p>
            </div>
          </details>

          <!-- Q3 -->
          <details
            class="group rounded-2xl border border-gray-100 bg-white/90 backdrop-blur p-5 shadow-sm cursor-pointer"
          >
            <summary
              class="flex items-start justify-between gap-3 cursor-pointer"
            >
              <div class="text-base md:text-lg font-semibold text-gray-900">
                3. My child hasn't been born yet / is only a few months old. Is
                it too early to join?
              </div>
              <i
                data-lucide="chevron-down"
                class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180"
              ></i>
            </summary>
            <div class="mt-3 text-gray-700 leading-relaxed space-y-2">
              <p>Not at all — in fact, we highly recommend it! 🤰</p>
              <p>
                The earlier you understand your child's brain and emotional
                development, the more prepared you'll be during parenting.
                You'll avoid unnecessary struggles, reduce stress, and prevent
                feelings of guilt or helplessness.
              </p>
            </div>
          </details>

          <!-- Q4 -->
          <details
            class="group rounded-2xl border border-gray-100 bg-white/90 backdrop-blur p-5 shadow-sm cursor-pointer"
          >
            <summary
              class="flex items-start justify-between gap-3 cursor-pointer"
            >
              <div class="text-base md:text-lg font-semibold text-gray-900">
                4. Is the course only for mothers? Can fathers join?
              </div>
              <i
                data-lucide="chevron-down"
                class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180"
              ></i>
            </summary>
            <div class="mt-3 text-gray-700 leading-relaxed space-y-2">
              <p>💡 Absolutely — fathers are most welcome!</p>
              <p>
                4Q is not just a support system for mothers; it's also the best
                starting point for fathers and partners to be actively involved
                in parenting. A father's participation greatly boosts a child's
                sense of security and social intelligence (SQ), while also
                strengthening the couple's partnership.
              </p>
            </div>
          </details>

          <!-- Q5 -->
          <details
            class="group rounded-2xl border border-gray-100 bg-white/90 backdrop-blur p-5 shadow-sm cursor-pointer"
          >
            <summary
              class="flex items-start justify-between gap-3 cursor-pointer"
            >
              <div class="text-base md:text-lg font-semibold text-gray-900">
                5. I've already tried "gentle parenting," but my child is still
                difficult to handle. Will this course help?
              </div>
              <i
                data-lucide="chevron-down"
                class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180"
              ></i>
            </summary>
            <div class="mt-3 text-gray-700 leading-relaxed space-y-2">
              <p>✔️ Yes, it will.</p>
              <p>
                Many parents mistake "gentle" for "weak." In this course, you'll
                learn how to:
              </p>
              <ul class="list-disc pl-6 space-y-1">
                <li>Be gentle yet firm</li>
                <li>Stay strong without being harsh</li>
                <li>Keep yourself steady even during emotional outbursts</li>
              </ul>
            </div>
          </details>

          <!-- Q6 -->
          <details
            class="group rounded-2xl border border-gray-100 bg-white/90 backdrop-blur p-5 shadow-sm cursor-pointer"
          >
            <summary
              class="flex items-start justify-between gap-3 cursor-pointer"
            >
              <div class="text-base md:text-lg font-semibold text-gray-900">
                6. I don't have an education or psychology background. Will I
                understand?
              </div>
              <i
                data-lucide="chevron-down"
                class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180"
              ></i>
            </summary>
            <div class="mt-3 text-gray-700 leading-relaxed space-y-2">
              <p>No worries!</p>
              <p>
                The course is delivered through real-life case studies and
                interactive games — no professional background is needed. Every
                parent will understand and, more importantly, be able to apply
                it right away.
              </p>
            </div>
          </details>

          <!-- Q7 -->
          <details
            class="group rounded-2xl border border-gray-100 bg-white/90 backdrop-blur p-5 shadow-sm cursor-pointer"
          >
            <summary
              class="flex items-start justify-between gap-3 cursor-pointer"
            >
              <div class="text-base md:text-lg font-semibold text-gray-900">
                7. What will I gain after completing the course?
              </div>
              <i
                data-lucide="chevron-down"
                class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180"
              ></i>
            </summary>
            <div class="mt-3 text-gray-700 leading-relaxed space-y-2">
              <p>You will:</p>
              <ul class="list-disc pl-6 space-y-1">
                <li>
                  Understand the brain and emotional logic behind your child's
                  behavior
                </li>
                <li>
                  Learn how to regulate your own emotions — no more bottling up
                  or exploding
                </li>
                <li>Master practical parent–child communication techniques</li>
                <li>Build your personal Mind Vehicle growth map</li>
              </ul>
              <p>No longer just "knowing," but truly "being able to do."</p>
            </div>
          </details>

          <!-- Q8 -->
          <details
            class="group rounded-2xl border border-gray-100 bg-white/90 backdrop-blur p-5 shadow-sm cursor-pointer"
          >
            <summary
              class="flex items-start justify-between gap-3 cursor-pointer"
            >
              <div class="text-base md:text-lg font-semibold text-gray-900">
                8. Many parents ask: why does a 2-day course — personally led by
                Dr. Elaine, co-facilitated with 988's renowned DJ Chan Fong, and
                internationally accredited by CCE Finland — cost only RM1,480?
              </div>
              <i
                data-lucide="chevron-down"
                class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180"
              ></i>
            </summary>

            <div class="mt-3 text-gray-700 leading-relaxed">
              <ul class="list-disc pl-6 space-y-2">
                <li>
                  The answer is simple: this is not just another course. It's
                  part of an educational movement.
                </li>
                <li>
                  Over 15 years, our team has launched internationally
                  recognized programs, collaborating with global institutions
                  like CCE Finland to bring world-class educational research to
                  Malaysia.
                </li>
                <li>
                  The price remains accessible not because its value is low, but
                  because our mission is clear — to make it possible for more
                  parents to participate, transforming inner potential into a
                  global impact for children and families.
                </li>
                <li>
                  So, RM1,480 is not just a fee — it's an investment in your
                  family's future.
                </li>
              </ul>
            </div>
          </details>

          <!-- Q9 -->
          <details
            class="group rounded-2xl border border-gray-100 bg-white/90 backdrop-blur p-5 shadow-sm cursor-pointer"
          >
            <summary
              class="flex items-start justify-between gap-3 cursor-pointer"
            >
              <div class="text-base md:text-lg font-semibold text-gray-900">
                9. Can I attend alone if my partner is not available?
              </div>
              <i
                data-lucide="chevron-down"
                class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180"
              ></i>
            </summary>
            <div class="mt-3 text-gray-700 leading-relaxed space-y-2">
              <p>Of course! 💬</p>
              <p>
                Many participants start by attending alone, then inspire their
                partners to join the journey. If your spouse or partner wishes
                to join later, they can enjoy the full experience for an
                additional RM500.
              </p>
            </div>
          </details>

          <!-- Q10 -->
          <details
            class="group rounded-2xl border border-gray-100 bg-white/90 backdrop-blur p-5 shadow-sm cursor-pointer"
          >
            <summary
              class="flex items-start justify-between gap-3 cursor-pointer"
            >
              <div class="text-base md:text-lg font-semibold text-gray-900">
                10. Will this course really make a difference?
              </div>
              <i
                data-lucide="chevron-down"
                class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180"
              ></i>
            </summary>
            <div class="mt-3 text-gray-700 leading-relaxed space-y-2">
              <p>❤️ Here's what parents have said:</p>
              <ul class="list-disc pl-6 space-y-1">
                <li>
                  "It's not that I wasn't capable — I was just missing the right
                  system."
                </li>
                <li>
                  "I finally learned how to respond to my child with gentleness
                  and strength, instead of always blaming myself."
                </li>
              </ul>
              <p>
                You don't need to be a perfect parent. You just need a system
                that helps you stay aware, keep learning, and keep growing.
              </p>
            </div>
          </details>

          <div
            class="mt-4 rounded-xl border border-purple-200 bg-purple-50/70 text-purple-900 p-4"
          >
            <div
              class="flex items-center justify-between flex-col sm:flex-row gap-3"
            >
              <div class="text-sm md:text-base">
                <span class="font-semibold">👉 Important Note：</span>
                Seats are limited — register early to secure your place!
              </div>
              <a
                href="#register"
                class="pay-link inline-flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-purple-600 via-fuchsia-500 to-orange-400 shadow hover:opacity-95 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-purple-500"
              >
                Register Now
                <i data-lucide="arrow-right" class="w-4 h-4"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- End of Call to Action Section -->
    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
      <div class="max-w-7xl mx-auto px-4">
        <div class="grid md:grid-cols-2 gap-8">
          <div>
            <img
              alt="Parents First"
              class="h-12 mb-4 brightness-0 invert"
              src="assets/parents_first_logo1.png"
            />
            <p class="text-gray-400 mb-4">
              马来西亚首个国际认证的华语家庭教育课程，致力于帮助家长建立科学的育儿理念。
            </p>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Contact Us</h4>
            <div class="space-y-2 text-gray-300">
              <div class="flex items-center gap-2">
                <i class="w-4 h-4" data-lucide="phone"></i
                ><span>+6014-685 7273</span>
              </div>
              <div class="flex items-center gap-2">
                <i class="w-4 h-4" data-lucide="mail"></i
                ><span>parentfirst2u@gmail.com</span>
              </div>
            </div>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>© 2025 Parents First. Copyright All Rights Reserved.</p>
        </div>
      </div>
    </footer>
    <script>
      // Progress bar to registration
      (function () {
        function clamp(n, min, max) {
          return Math.max(min, Math.min(max, n));
        }
        const target = document.getElementById("register");
        const bar = document.querySelector("#page-progress .bar");
        function onScroll() {
          if (!target || !bar) return;
          const rect = target.getBoundingClientRect();
          const docTop = window.scrollY || window.pageYOffset;
          const targetY = docTop + rect.top;
          const progress = clamp(docTop / Math.max(1, targetY), 0, 1);
          bar.style.width = (progress * 100).toFixed(2) + "%";
        }
        window.addEventListener("scroll", onScroll, { passive: true });
        window.addEventListener("resize", onScroll);
        document.addEventListener("DOMContentLoaded", onScroll);
        onScroll();
      })();
      // Reveal animation
      (function () {
        const io = new IntersectionObserver(
          (entries) => {
            entries.forEach((e) => {
              if (e.isIntersecting) e.target.classList.add("visible");
            });
          },
          { threshold: 0.15 }
        );
        document.querySelectorAll(".reveal").forEach((el) => io.observe(el));
      })();
      // Lazy-load intro video when in view
      (function () {
        const vid = document.getElementById("intro-video");
        if (!vid) return;
        const srcEl = vid.querySelector("source");
        if (!srcEl) return;
        let loaded = false;
        function load() {
          if (loaded) return;
          const src = srcEl.getAttribute("data-src");
          if (!src) return;
          srcEl.setAttribute("src", src);
          vid.load();
          loaded = true;
        }
        const io = new IntersectionObserver(
          (entries) => {
            entries.forEach((e) => {
              if (e.isIntersecting) {
                load();
                io.disconnect();
              }
            });
          },
          { threshold: 0.2 }
        );
        io.observe(vid);
      })();
      // Tabs
      (function () {
        const buttons = document.querySelectorAll(".tab-btn");
        const panels = {
          iq: document.getElementById("tab-iq"),
          eq: document.getElementById("tab-eq"),
          aq: document.getElementById("tab-aq"),
          sq: document.getElementById("tab-sq"),
        };
        function activate(name) {
          buttons.forEach((b) =>
            b.setAttribute("aria-selected", String(b.dataset.tab === name))
          );
          Object.entries(panels).forEach(([k, p]) => {
            if (p) p.classList.toggle("active", k === name);
          });
        }
        buttons.forEach((b) =>
          b.addEventListener("click", () => activate(b.dataset.tab))
        );
        activate("iq");
      })();
      window.addEventListener("DOMContentLoaded", () => {
        if (window.lucide) window.lucide.createIcons();
        // Hero map session click -> select session in form
        const list = document.getElementById("hero-session-list");
        const select = document.getElementById("rf-session");
        if (list && select) {
          list.querySelectorAll(".session-item").forEach((item) => {
            item.addEventListener("click", () => {
              const val = item.getAttribute("data-session");
              if (val) {
                select.value = val;
                select.dispatchEvent(new Event("change"));
              }
              list
                .querySelectorAll(".session-item")
                .forEach((i) => i.classList.remove("ring", "ring-white"));
              item.classList.add("ring", "ring-white");
            });
          });
        }
        // Calculate totals based on spouse and original price selection
        const partnerSel = document.getElementById("rf-partner-coming");
        const spouseSelect = document.getElementById("pay-spouse-select");
        const totalEl = document.getElementById("pay-total");
        const totalHidden = document.getElementById("rf-payment-total");
        const chipSpouse = document.getElementById("chip-spouse");
        const bdSpouse = document.getElementById("bd-spouse");
        const bdSpouseDot = document.getElementById("bd-spouse-dot");
        const partnerFields = Array.from(
          document.querySelectorAll(".partner-field")
        );
        const partnerInputs = [
          "rf-partner-name",
          "rf-partner-ic",
          "rf-partner-phone",
          "rf-partner-email",
          "rf-partner-occupation",
        ]
          .map((id) => document.getElementById(id))
          .filter(Boolean);

        const originalPriceSel = document.getElementById("pay-original-price");
        // Discounted prices (current logic)
        // promo state and endpoint (replace with your deployed Apps Script URL)
        let activePromo = null; // { code, type: 'percent'|'amount', value: number }
        const PROMO_ENDPOINT =
          "https://script.google.com/macros/s/AKfycbzz3N87hOAa-ZfqfC41pRRIIoiru--8Z3mVCg26-bPO_FspC-_1g-2U8hyaReyVar9y/exec";

        const BASE = 1598.4; // RM
        const SPOUSE = 540.0; // RM
        // Original prices (new logic)
        const ORIG_SINGLE = 2808.0; // RM
        const ORIG_DOUBLE = 3348.0; // RM

        function togglePartnerFields(show) {
          partnerFields.forEach((el) => el.classList.toggle("hidden", !show));
          // Rely on inline validation only; do not toggle required attributes
          partnerInputs.forEach((inp) => {
            /* noop: visual toggle only */
          });
        }
        function refreshTotal() {
          const withSpouse = !!(partnerSel && partnerSel.value === "是");
          const payOriginal = !!(
            originalPriceSel && originalPriceSel.value === "no"
          );
          let total = 0;
          if (payOriginal) {
            total = withSpouse ? ORIG_DOUBLE : ORIG_SINGLE;
          } else {
            total = withSpouse ? BASE + SPOUSE : BASE;
          }

          // Apply active promo if present
          let discountLabel = "";
          if (activePromo && total > 0) {
            if (activePromo.type === "percent") {
              const disc = total * Number(activePromo.value || 0);
              total = Math.max(0, total - disc);
              discountLabel = ` (Applied Promo Code ${Math.round(
                (activePromo.value || 0) * 100
              )}%)`;
            } else if (activePromo.type === "amount") {
              const promoAmt = Number(activePromo.value || 0);

              // Adjust total considering 8% GST on original price
              // Formula derivation:
              // Let orig = original total including GST
              // Let promoAmt = discount amount before GST
              // We want to find new total after applying promoAmt and adding GST
              // newTotal = (orig - promoAmt) * 1.08
              // To isolate the effect of promoAmt on the original price before GST:
              // orig = (newTotal / 1.08) + promoAmt
              // Therefore, newTotal = (orig / 1.08) - promoAmt * 1.08
              let orig = total;
              const computed = (orig / 1.08 - promoAmt) * 1.08;
              total = Math.max(0, computed);

              discountLabel = ` (Applied Promo Code RM ${promoAmt.toFixed(2)})`;
            }
          }
          if (totalEl)
            totalEl.textContent =
              `RM ${total.toLocaleString(undefined, {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2,
              })}` + discountLabel;

          if (totalHidden) totalHidden.value = total.toFixed(2);
          if (chipSpouse) {
            chipSpouse.classList.toggle("border-teal-300", withSpouse);
            chipSpouse.classList.toggle("bg-teal-50", withSpouse);
            chipSpouse.classList.toggle("text-teal-700", withSpouse);
            chipSpouse.classList.toggle("border-gray-200", !withSpouse);
            chipSpouse.classList.toggle("bg-white", !withSpouse);
            chipSpouse.classList.toggle("text-gray-500", !withSpouse);
            chipSpouse.setAttribute("aria-pressed", String(withSpouse));
          }
          if (bdSpouse) {
            bdSpouse.textContent = withSpouse
              ? "With Spouse" +
                (payOriginal ? "RM 540.00 (Original Price)" : "RM 540.00")
              : "With Spouse: Not Selected";
          }
          if (bdSpouseDot) {
            bdSpouseDot.className =
              "inline-block h-1.5 w-1.5 rounded-full " +
              (withSpouse ? "bg-teal-500" : "bg-gray-300");
          }
          togglePartnerFields(withSpouse);
        }
        if (partnerSel) {
          partnerSel.addEventListener("change", () => {
            if (spouseSelect) {
              spouseSelect.value =
                partnerSel.value === "是" ? "with" : "single";
            }
            refreshTotal();
          });
        }

        if (originalPriceSel) {
          originalPriceSel.addEventListener("change", refreshTotal);
        }

        // Ensure spouse dropdown is disabled and reflects partner selection
        if (spouseSelect) {
          spouseSelect.setAttribute("disabled", "");
          spouseSelect.setAttribute("aria-disabled", "true");
          spouseSelect.classList.add(
            "bg-gray-50",
            "text-gray-500",
            "border-gray-200"
          );
        }
        refreshTotal();
        // Smooth scroll when clicking "查看付款方式"
        document.querySelectorAll(".pay-link").forEach((a) => {
          a.addEventListener("click", (ev) => {
            // default anchor to #register already works; enhance with smooth behavior
            if (a.getAttribute("href") === "#register") {
              ev.preventDefault();
              document
                .getElementById("register")
                ?.scrollIntoView({ behavior: "smooth" });
            }
          });
        });

        // Promo apply handler
        const promoInput = document.getElementById("promo-code");
        const promoBtn = document.getElementById("promo-apply");
        const promoMsg = document.getElementById("promo-msg");
        const promoReservationInput = document.getElementById(
          "promo-reservation-id"
        );
        // Helpers for promo server calls
        window.promoCheck = async function (code) {
          try {
            const r = await fetch(
              PROMO_ENDPOINT + "?action=check&code=" + encodeURIComponent(code),
              { method: "GET", mode: "cors" }
            );
            const j = await r.json();
            return j;
          } catch (_) {
            return { ok: false, error: "network" };
          }
        };
        window.promoReserve = async function (code, reserver) {
          try {
            const r = await fetch(
              PROMO_ENDPOINT +
                "?action=reserve&code=" +
                encodeURIComponent(code) +
                "&reserver=" +
                encodeURIComponent(reserver || ""),
              { method: "GET", mode: "cors" }
            );
            const j = await r.json();
            return j;
          } catch (_) {
            return { ok: false, error: "network" };
          }
        };
        window.promoConfirm = async function (reservationId, redeemer) {
          try {
            const r = await fetch(
              PROMO_ENDPOINT +
                "?action=confirm&reservationId=" +
                encodeURIComponent(reservationId) +
                "&redeemer=" +
                encodeURIComponent(redeemer || ""),
              { method: "GET", mode: "cors" }
            );
            const j = await r.json();
            return j;
          } catch (_) {
            return { ok: false, error: "network" };
          }
        };
        if (promoBtn && promoInput) {
          promoBtn.addEventListener("click", async function () {
            const code = (promoInput.value || "").trim();
            if (!code) {
              promoMsg.textContent = "Key in Promo Code first";
              promoMsg.className = "mt-2 text-sm text-red-600";
              return;
            }
            promoBtn.disabled = true;
            promoBtn.textContent = "Validating...";
            promoMsg.textContent = "";
            try {
              const json = await promoCheck(code);
              if (json && json.ok) {
                activePromo = {
                  code: json.code,
                  type: json.type,
                  value: json.value,
                };
                promoMsg.textContent =
                  "Promo code is valid, will attempt to reserve on submit";
                promoMsg.className = "mt-2 text-sm text-green-600";
                refreshTotal();
              } else {
                promoMsg.textContent =
                  json && json.error ? json.error : "Invalid or already used";
                promoMsg.className = "mt-2 text-sm text-red-600";
              }
            } catch (err) {
              promoMsg.textContent =
                "Validation failed, please try again later";
              promoMsg.className = "mt-2 text-sm text-red-600";
            }
            promoBtn.disabled = false;
            promoBtn.textContent = "Validate";
          });
        }

        // FAQ expand/collapse controls
        const faqExpand = document.getElementById("faq-expand-all");
        const faqCollapse = document.getElementById("faq-collapse-all");
        const faqDetails = Array.from(
          document.querySelectorAll("#faq details")
        );
        if (faqExpand) {
          faqExpand.addEventListener("click", () => {
            faqDetails.forEach((d) => d.setAttribute("open", ""));
          });
        }
        if (faqCollapse) {
          faqCollapse.addEventListener("click", () => {
            faqDetails.forEach((d) => d.removeAttribute("open"));
          });
        }
        // Make entire FAQ card clickable to open (but don't close on content clicks)
        faqDetails.forEach((d) => {
          // visual affordance
          d.classList.add(
            "hover:shadow-md",
            "transition",
            "hover:border-purple-200"
          );
          d.addEventListener("click", (ev) => {
            // Ignore native summary toggle and interactive elements
            if (
              ev.target.closest(
                'summary,a,button,input,textarea,select,label,[role="button"]'
              )
            )
              return;
            if (!d.open) {
              d.open = true;
            }
          });
        });
        // Referral Other toggle
        const referralSel = document.getElementById("rf-referral");
        const referralOtherWrap = document.getElementById(
          "rf-referral-other-wrap"
        );
        const referralFriendWrap = document.getElementById(
          "rf-referral-friend-wrap"
        );
        const referralDeemceeWrap = document.getElementById(
          "rf-referral-deemcee-wrap"
        );
        const referralDeemceeSel = document.getElementById(
          "rf-referral-deemcee"
        );
        if (referralSel) {
          const sync = () => {
            const show = referralSel.value === "Others";
            if (referralOtherWrap)
              referralOtherWrap.classList.toggle("hidden", !show);
            const showFriend = referralSel.value === "Family & Friends";
            if (referralFriendWrap)
              referralFriendWrap.classList.toggle("hidden", !showFriend);
            const showDeemcee = referralSel.value === "Deemcee";
            if (referralDeemceeWrap)
              referralDeemceeWrap.classList.toggle("hidden", !showDeemcee);
            if (referralDeemceeSel) {
              if (!showDeemcee) {
                referralDeemceeSel.value = "";
              }
            }
          };
          referralSel.addEventListener("change", sync);
          sync();
        }
        // Copy bank fields to clipboard
        document.querySelectorAll("[data-copy]").forEach((btn) => {
          btn.addEventListener("click", async () => {
            const sel = btn.getAttribute("data-copy");
            const el = sel ? document.querySelector(sel) : null;
            if (!el) return;
            const text = (el.textContent || "").trim();
            if (!text) {
              alert("No content to copy");
              return;
            }
            try {
              await navigator.clipboard.writeText(text);
              btn.textContent = "Copied";
              setTimeout(() => {
                btn.textContent = "Copy";
              }, 1200);
            } catch (_e) {
              alert("Copy failed, please copy manually");
            }
          });
        });
        // Click QR to open a simple modal preview
        const qr = document.getElementById("pay-qr");
        if (qr) {
          qr.style.cursor = "zoom-in";
          qr.addEventListener("click", () => {
            const overlay = document.createElement("div");
            overlay.className =
              "fixed inset-0 z-[200] bg-black/70 grid place-items-center p-6";
            overlay.innerHTML = `<div class="relative max-w-[92vw]"><img src="${qr.getAttribute(
              "src"
            )}" alt="QR" class="max-w-[92vw] max-h-[80vh] rounded-2xl shadow-2xl"/><button aria-label="close" class="absolute -top-3 -right-3 w-9 h-9 rounded-full bg-white text-gray-700 shadow">✕</button></div>`;
            document.body.appendChild(overlay);
            overlay.addEventListener("click", (e) => {
              if (e.target === overlay || e.target.closest("button")) {
                overlay.remove();
              }
            });
          });
        }
        // Chan Fong image: subtle tilt + click to zoom
        const cfCard = document.getElementById("chanfong-tilt");
        const cfImg = document.getElementById("chanfong-img");
        if (cfCard && cfImg) {
          const maxTilt = 8; // degrees
          const damp = 14;
          const shine = document.getElementById("cf-shine");
          if (shine) {
            shine.style.background =
              "linear-gradient(120deg, transparent, rgba(255,255,255,.25), transparent)";
            shine.style.transform = "translateX(-120%) skewX(-18deg)";
          }
          cfCard.addEventListener("mousemove", (e) => {
            const r = cfCard.getBoundingClientRect();
            const cx = e.clientX - r.left;
            const cy = e.clientY - r.top;
            const rx = (cy / r.height - 0.5) * -maxTilt; // invert Y for natural feel
            const ry = (cx / r.width - 0.5) * maxTilt;
            cfCard.style.transform = `perspective(900px) rotateX(${rx.toFixed(
              2
            )}deg) rotateY(${ry.toFixed(2)}deg)`;
            if (shine) {
              const progress = cx / r.width; // 0..1
              shine.style.opacity = ".9";
              shine.style.transition = "none";
              shine.style.transform = `translateX(${(
                progress * 140 -
                70
              ).toFixed(1)}%) skewX(-18deg)`;
            }
          });
          cfCard.addEventListener("mouseleave", () => {
            cfCard.style.transform =
              "perspective(900px) rotateX(0deg) rotateY(0deg)";
            if (shine) {
              shine.style.opacity = "0";
              shine.style.transition = "opacity .25s ease, transform .25s ease";
              shine.style.transform = "translateX(-120%) skewX(-18deg)";
            }
          });
          cfCard.style.cursor = "zoom-in";
          const openZoom = () => {
            const overlay = document.createElement("div");
            overlay.className =
              "fixed inset-0 z-[200] bg-black/70 grid place-items-center p-6";
            overlay.innerHTML = `<div class="relative max-w-[92vw]"><img src="${cfImg.getAttribute(
              "src"
            )}" alt="电台DJ 陈峰 Chan Fong" class="max-w-[92vw] max-h-[80vh] rounded-2xl shadow-2xl"/><button aria-label="close" class="absolute -top-3 -right-3 w-9 h-9 rounded-full bg-white text-gray-700 shadow">✕</button></div>`;
            document.body.appendChild(overlay);
            overlay.addEventListener("click", (e) => {
              if (e.target === overlay || e.target.closest("button")) {
                overlay.remove();
              }
            });
          };
          cfCard.addEventListener("click", openZoom);
          cfCard.addEventListener("keydown", (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              openZoom();
            }
          });
        }
        // Dr. Elaine image: subtle tilt + click to zoom
        const elCard = document.getElementById("elaine-tilt");
        const elImg = document.getElementById("elaine-img");
        if (elCard && elImg) {
          const maxTilt = 8; // degrees
          const elShine = document.getElementById("elaine-shine");
          if (elShine) {
            elShine.style.background =
              "linear-gradient(120deg, transparent, rgba(255,255,255,.25), transparent)";
            elShine.style.transform = "translateX(-120%) skewX(-18deg)";
          }
          elCard.addEventListener("mousemove", (e) => {
            const r = elCard.getBoundingClientRect();
            const cx = e.clientX - r.left;
            const cy = e.clientY - r.top;
            const rx = (cy / r.height - 0.5) * -maxTilt;
            const ry = (cx / r.width - 0.5) * maxTilt;
            elCard.style.transform = `perspective(900px) rotateX(${rx.toFixed(
              2
            )}deg) rotateY(${ry.toFixed(2)}deg)`;
            if (elShine) {
              const progress = cx / r.width;
              elShine.style.opacity = ".9";
              elShine.style.transition = "none";
              elShine.style.transform = `translateX(${(
                progress * 140 -
                70
              ).toFixed(1)}%) skewX(-18deg)`;
            }
          });
          elCard.addEventListener("mouseleave", () => {
            elCard.style.transform =
              "perspective(900px) rotateX(0deg) rotateY(0deg)";
            if (elShine) {
              elShine.style.opacity = "0";
              elShine.style.transition =
                "opacity .25s ease, transform .25s ease";
              elShine.style.transform = "translateX(-120%) skewX(-18deg)";
            }
          });
          elCard.style.cursor = "zoom-in";
          const openZoomElaine = () => {
            const overlay = document.createElement("div");
            overlay.className =
              "fixed inset-0 z-[200] bg-black/70 grid place-items-center p-6";
            overlay.innerHTML = `<div class="relative max-w-[92vw]"><img src="${elImg.getAttribute(
              "src"
            )}" alt="羅苡玲博士 Dr. Elaine Loo" class="max-w-[92vw] max-h-[80vh] rounded-2xl shadow-2xl"/><button aria-label="close" class="absolute -top-3 -right-3 w-9 h-9 rounded-full bg-white text-gray-700 shadow">✕</button></div>`;
            document.body.appendChild(overlay);
            overlay.addEventListener("click", (e) => {
              if (e.target === overlay || e.target.closest("button")) {
                overlay.remove();
              }
            });
          };
          elCard.addEventListener("click", openZoomElaine);
          elCard.addEventListener("keydown", (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              openZoomElaine();
            }
          });
        }
      });

      // ========== Google Maps (Hero) ==========
      // 1. 替换 YOUR_GOOGLE_MAPS_API_KEY 为你的真实浏览器 API Key (建议限制域名)
      // 2. 可调 MAP_CENTER / ZOOM
      // 3. 若用户屏蔽地图脚本，会展示 fallback 面板
      // Leaflet (OpenStreetMap) 初始化（无 API Key）
      (function () {
        function initLeaflet() {
          if (initLeaflet._done) return; // guard
          const el = document.getElementById("hero-gmap");
          if (!el || !window.L) {
            return;
          }
          initLeaflet._done = true;
          const map = L.map(el, {
            zoomControl: false,
            attributionControl: false,
          });
          L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
            maxZoom: 18,
          }).addTo(map);
          const attrib = document.createElement("div");
          attrib.className = "leaflet-attrib-mini";
          attrib.innerHTML = "© OpenStreetMap";
          el.appendChild(attrib);
          const sessions = [
            {
              city: "Penang",
              coords: [5.4164, 100.3327],
              date: "4 & 5 Oct 2025",
              sessionValue: "Penang · 4 & 5 October 2025（9am - 5pm）",
              color: "#7c3aed",
              venue: "JEN Penang Georgetown by Shangri-La",
            },
            // Approximate coordinates for The Pearl Kuala Lumpur Hotel (Old Klang Road)
            {
              city: "Selangor",
              coords: [3.087, 101.674],
              date: "29 & 30 Nov 2025",
              sessionValue: "Selangor · 29 & 30 November 2025（9am - 5pm）",
              color: "#fb923c",
              venue: "The Pearl Kuala Lumpur Hotel",
            },
            {
              city: "Johor",
              coords: [1.4927, 103.7414],
              date: "18 & 19 Oct 2025",
              sessionValue: "Johor · 18 & 19 October 2025（9am - 5pm）",
              color: "#06b6d4",
              venue: "Hotel Granada Johor Bahru",
            },
          ];
          const latlngs = [];
          const select = document.getElementById("rf-session");
          const list = document.getElementById("hero-session-list");
          sessions.forEach((ses) => {
            latlngs.push(ses.coords);
            // 解析 sessionValue -> City · Date（Time）
            const raw = ses.sessionValue;
            // 提取时间（支持全角/半角括号）
            const timeMatch = raw.match(/[（(]([^）)]+)[)）]/);
            const timePart = timeMatch ? timeMatch[1].trim() : ""; // 9am - 5pm
            // 去掉城市与时间括号部分得到日期文字
            let datePart = raw
              .replace(ses.city, "") // remove city
              .replace(/^[\s·:]+/, "") // leading separators
              .replace(/[（(].*?[）)]/, "") // remove (time)
              .replace(/\s+$/, "")
              .trim();
            // 标准化月份缩写 (确保 "Oct" -> "October" 保持不变; 用户原文已完整)
            // 组合显示：City : Date  / time line below
            const cityDate = `${ses.city} : ${datePart}`;
            const iconHtml = `<div style="--c:${
              ses.color
            }; position:relative; transform:translate(-50%,-50%); font:11px/1.4 Inter,system-ui;">
                 <div style="background:var(--c);width:18px;height:18px;border-radius:50%;border:2px solid #fff;box-shadow:0 2px 6px -1px rgba(0,0,0,.45)"></div>
                 <div style="position:absolute;left:50%;top:24px;transform:translateX(-50%);background:rgba(0,0,0,.68);color:#fff;padding:6px 10px;font-size:10px;font-weight:600;border-radius:10px;white-space:nowrap;box-shadow:0 2px 6px -2px rgba(0,0,0,.45)">
                   <span style='display:block;font-weight:700;letter-spacing:.5px'>${cityDate}</span>
                   <span style='display:block;font-weight:500;margin-top:4px'>${timePart}</span>
                   ${
                     ses.venue
                       ? `<span style='display:block;font-weight:500;margin-top:4px;opacity:.9'>${ses.venue}</span>`
                       : ""
                   }
                 </div>
               </div>`;
            const icon = L.divIcon({
              className: "session-pin",
              html: iconHtml,
              iconSize: [1, 1],
              iconAnchor: [0, 0],
            });
            const marker = L.marker(ses.coords, { icon }).addTo(map);
            marker.on("click", () => {
              if (select) {
                select.value = ses.sessionValue;
                select.dispatchEvent(new Event("change"));
              }
              if (list) {
                list
                  .querySelectorAll(".session-item")
                  .forEach((i) => i.classList.remove("ring", "ring-white"));
                const target = list.querySelector(
                  `.session-item[data-loc="${ses.city}"]`
                );
                if (target) target.classList.add("ring", "ring-white");
              }
            });
          });
          if (latlngs.length) {
            map.fitBounds(L.latLngBounds(latlngs), { padding: [30, 30] });
          }
        }
        // Lazy load with IntersectionObserver (first visibility)
        function setupObserver() {
          const target = document.querySelector(".session-map-card");
          if (!target) {
            initLeaflet();
            return;
          }
          const io = new IntersectionObserver(
            (entries) => {
              entries.forEach((e) => {
                if (e.isIntersecting) {
                  initLeaflet();
                  io.disconnect();
                }
              });
            },
            { threshold: 0.2 }
          );
          io.observe(target);
        }
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", setupObserver);
        } else {
          setupObserver();
        }
        window.addEventListener("orientationchange", () => {
          if (initLeaflet._done)
            setTimeout(() => {
              try {
                const el = document.getElementById("hero-gmap");
                el &&
                  el._leaflet_id &&
                  el._leaflet_id.invalidateSize &&
                  el._leaflet_id.invalidateSize();
              } catch (_) {}
            }, 350);
        });
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", initLeaflet);
        } else {
          initLeaflet();
        }
      })();
      // Google Sheets submission (Apps Script Web App)
      (function () {
        const GAS_ENDPOINT =
          "https://script.google.com/macros/s/AKfycbx3cJF7KYJTkwF_g3ML9djPQJmnk_nayuR07alohKZ50zKm--Lfvx_cXokzZpaNeG2Tcg/exec"; // TODO: 用你的 Apps Script 部署 URL 替换
        const ENDPOINT_SECRET = "bbcc$$#1234YYg43!!dsfdsf@33"; // 可选：与 Apps Script 校验的 secret
        const DUP_KEY_TTL_MS = 1 * 60 * 1000; // 5 分钟内阻止重复提交 (name+email+session)
        const PAGE_LOAD_TS = Date.now(); // 用于最小停留时间判断
        const SHEET_TAB = "Website";
        // Cooldown helpers (disable submit for N seconds with a countdown)
        function getCooldownRemaining() {
          try {
            const until =
              parseInt(localStorage.getItem("regCooldownUntil") || "0", 10) ||
              0;
            const now = Date.now();
            return until > now ? Math.ceil((until - now) / 1000) : 0;
          } catch (_) {
            return 0;
          }
        }
        function startSubmitCooldown(btn, originalHTML, seconds) {
          seconds = Math.max(1, Number(seconds) || 60);
          try {
            localStorage.setItem(
              "regCooldownUntil",
              String(Date.now() + seconds * 1000)
            );
          } catch (_) {}
          let remain = seconds;
          btn.disabled = true;
          const setLabel = () => {
            btn.innerHTML = `已提交 ${remain}s`;
          };
          setLabel();
          const timer = setInterval(() => {
            remain -= 1;
            if (remain <= 0) {
              clearInterval(timer);
              btn.disabled = false;
              btn.innerHTML = originalHTML;
              try {
                localStorage.removeItem("regCooldownUntil");
              } catch (_) {}
            } else {
              setLabel();
            }
          }, 1000);
        }
        document.addEventListener("DOMContentLoaded", () => {
          const btn = document.getElementById("register-submit");
          const rem = getCooldownRemaining();
          if (btn && rem > 0) {
            startSubmitCooldown(btn, btn.innerHTML, rem);
          }
        });
        // Upload via Apps Script: we'll send Base64 + filename to Apps Script (mode=uploadProof)

        // 轻量级单元格安全清理，防止后续在表格中被当作公式执行 (=, +, -, @ 开头等)
        function sanitizeForSheet(v) {
          if (typeof v !== "string") return v;
          const trimmed = v.trim();
          if (trimmed === "") return "";
          if (/^[=+\-@]/.test(trimmed)) return "'" + trimmed; // 前置单引号阻断公式
          return trimmed;
        }
        function normalizePhoneMY(input) {
          if (!input) return "";
          let s = String(input).trim();
          s = s.replace(/^00+/, "+");
          const hasPlus = s.startsWith("+");
          s = (hasPlus ? "+" : "") + s.replace(/[^\d]/g, "");
          if (s.startsWith("+60")) return s.replace(/^\+60\s*0+/, "+60");
          if (s.startsWith("60")) return ("+" + s).replace(/^\+60\s*0+/, "+60");
          if (s.startsWith("0")) return "+60" + s.replace(/^0+/, "");
          if (s.startsWith("+")) return s;
          if (/^1\d{7,9}$/.test(s)) return "+60" + s;
          return s;
        }
        // Inline error helpers
        function clearFieldError(el) {
          if (!el) return;
          el.removeAttribute("aria-invalid");
          el.classList.remove("ring-2", "ring-red-500");
          const next = el.nextElementSibling;
          if (next && next.classList.contains("field-error")) next.remove();
        }
        function showFieldError(el, msg) {
          if (!el) return;
          clearFieldError(el);
          el.setAttribute("aria-invalid", "true");
          el.classList.add("ring-2", "ring-red-500");
          const p = document.createElement("p");
          p.className = "field-error text-red-600 text-xs mt-1";
          p.textContent = msg;
          el.insertAdjacentElement("afterend", p);
        }
        // Attach live clear after DOM ready
        document.addEventListener("DOMContentLoaded", () => {
          const reg = document.getElementById("register-form");
          if (!reg) return;
          reg.querySelectorAll("input,select,textarea").forEach((el) => {
            el.addEventListener("input", () => clearFieldError(el));
            el.addEventListener("change", () => clearFieldError(el));
          });
        });
        window.handleRegistrationSubmit = async function (e) {
          e.preventDefault();
          const form = e.target;
          /* status element no longer used */ const btn =
            document.getElementById("register-submit");
          // If in cooldown, show countdown and block
          const activeRem = getCooldownRemaining();
          if (activeRem > 0) {
            startSubmitCooldown(btn, btn.innerHTML, activeRem);
            return false;
          }

          const DEBUG = window.location.search.includes("debugReg=1");
          if (
            !GAS_ENDPOINT ||
            GAS_ENDPOINT === "YOUR_APPS_SCRIPT_WEB_APP_URL"
          ) {
            alert(
              "Submission functionality not configured (missing valid GAS_ENDPOINT)."
            );
            return false;
          }
          const fd = new FormData(form);
          const payload = new URLSearchParams();
          // 蜜罐检测
          if (fd.get("hp_field")) {
            if (DEBUG) console.warn("[register] honeypot triggered, abort");
            return false;
          }
          // 最小停留时间（防部分脚本秒填提交）
          if (Date.now() - PAGE_LOAD_TS < 2500) {
            if (DEBUG) console.warn("[register] dwell time too short");
            alert("Please wait at least 2 seconds before submitting.");
            return false;
          }
          const entries = {};
          fd.forEach((v, k) => {
            entries[k] = v;
          });
          // 预校验并内联显示错误
          // 清除旧错误
          form.querySelectorAll(".field-error").forEach((n) => n.remove());
          form.querySelectorAll("input,select,textarea").forEach((el) => {
            el.classList.remove("ring-2", "ring-red-500");
            el.removeAttribute("aria-invalid");
          });
          const get = (id) => document.getElementById(id);
          const elName = get("rf-name");
          const elPhone = get("rf-phone");
          const elEmail = get("rf-email");
          const elIC = get("rf-ic");
          const elAddr = get("rf-address");
          const elSess = get("rf-session");
          const elChild = get("rf-child-age");
          const elOcc = get("rf-occupation");
          const elRef = get("rf-referral");
          const elRefOther = get("rf-referral-other");
          const elRefFriend = get("rf-referral-friend");
          const elRefDeemcee = get("rf-referral-deemcee");
          const elPartner = get("rf-partner-coming");
          const elPName = get("rf-partner-name");
          const elPPhone = get("rf-partner-phone");
          const elPIc = get("rf-partner-ic");
          const elPEmail = get("rf-partner-email");
          const elPOcc = get("rf-partner-occupation");
          const elProof = get("rf-payment-proof");
          const elTerms = get("rf-terms");

          let errCount = 0;
          let firstErrEl = null;
          function mark(el, msg) {
            if (!el) return;
            showFieldError(el, msg);
            if (!firstErrEl) firstErrEl = el;
            errCount++;
          }
          const val = (el) =>
            el && "value" in el ? String(el.value || "").trim() : "";
          // Basic requireds and patterns
          if (val(elName).length < 2)
            mark(elName, "Please enter name(at least 2 characters)");
          const emailRe = /^[^@\s]+@[^@\s]+\.[^@\s]+$/;
          if (!emailRe.test(val(elEmail)))
            mark(elEmail, "Please enter a valid email address.");
          if (!/^\+?\d[\d\s]{7,}$/.test(val(elPhone)))
            mark(elPhone, "Please enter a valid phone number.");
          if (val(elIC).length < 3) mark(elIC, "Please enter your IC number.");
          if (val(elAddr).length < 3)
            mark(elAddr, "Please enter your home address.");
          if (!val(elSess)) mark(elSess, "Please select a session.");
          if (!val(elChild))
            mark(elChild, "Please enter your child's age (enter NO if none).");
          if (!val(elOcc)) mark(elOcc, "Please enter your occupation.");
          if (!val(elRef)) mark(elRef, "Please select a referral source.");
          if (val(elRef) === "Others" && !val(elRefOther))
            mark(elRefOther, "Please specify the referral source.");
          if (val(elRef) === "Family & Friends" && !val(elRefFriend))
            mark(elRefFriend, "Please provide your friend's information.");
          if (val(elRef) === "Deemcee" && !val(elRefDeemcee))
            mark(elRefDeemcee, "Please select a Deemcee branch.");
          if (val(elPartner) === "是") {
            if (!val(elPName))
              mark(elPName, "Please enter your partner's name.");
            if (!/^\+?\d[\d\s]{7,}$/.test(val(elPPhone)))
              mark(elPPhone, "Please enter a valid partner phone number.");
            if (!val(elPIc))
              mark(elPIc, "Please enter your partner's IC number.");
            if (!emailRe.test(val(elPEmail)))
              mark(elPEmail, "Please enter a valid partner email address.");
            if (!val(elPOcc))
              mark(elPOcc, "Please enter your partner's occupation.");
          }
          const payMethod = fd.get("paymentMethod");
          const proofFile = fd.get("paymentProof");
          if (payMethod !== "stripe") {
            if (!(proofFile && proofFile.size)) {
              mark(elProof, "Please upload your payment proof.");
            } else if (proofFile.size > 5 * 1024 * 1024) {
              mark(elProof, "File too large (≤ 5MB).");
            }
          }
          if (!(elTerms && elTerms.checked))
            mark(elTerms, "Please read and agree to the course terms.");
          if (errCount > 0) {
            if (firstErrEl) {
              try {
                firstErrEl.focus({ preventScroll: true });
                firstErrEl.scrollIntoView({
                  behavior: "smooth",
                  block: "center",
                });
              } catch (_) {}
            }
            btn.disabled = false;
            return false;
          }
          // 处理付款凭证文件（转换为 Base64 以便通过 x-www-form-urlencoded 发送）
          let proofB64 = "";
          let uploadFileName = "";
          let payProofUrl = "";

          btn.disabled = true;
          const original = btn.innerHTML;
          btn.innerHTML = "提交中…";
          let cooldownStarted = false;

          if (proofFile && proofFile.size) {
            const maxBytes = 5 * 1024 * 1024; // 5MB 上限
            if (proofFile.size > maxBytes) {
              btn.disabled = false;
              return false;
            }
            // 生成规范化文件名: YYYYMMDDHHmmss_original-name
            const origName = proofFile.name || "proof";
            const safeName = origName.replace(/[^a-z0-9._-]+/gi, "_");
            const stamp = new Date()
              .toISOString()
              .replace(/[-:TZ.]/g, "")
              .slice(0, 14);
            uploadFileName = `${stamp}_${safeName}`;
            // payProofUrl will be filled by Apps Script response (public Drive URL)
            const toDataURL = (file) =>
              new Promise((res, rej) => {
                const fr = new FileReader();
                fr.onload = () => res(fr.result);
                fr.onerror = rej;
                fr.readAsDataURL(file);
              });
            try {
              const dataUrl = await toDataURL(proofFile);
              proofB64 = String(dataUrl).split(",")[1] || ""; // 去掉 data:*/*;base64,
            } catch (_e) {
              btn.disabled = false;
              btn.innerHTML = original;
              alert(
                "Failed to read payment proof, please try again or use a smaller image."
              );
              return false;
            }
            // 发送到 Apps Script 以保存到 Google Drive，并返回公开 URL
            try {
              const up = new URLSearchParams();
              up.append("mode", "uploadProof");
              up.append("filename", uploadFileName);
              up.append("mime", proofFile.type || "application/octet-stream");
              up.append("size", String(proofFile.size || 0));
              up.append("base64", proofB64);
              if (ENDPOINT_SECRET) up.append("secret", ENDPOINT_SECRET);
              const resp = await fetch(GAS_ENDPOINT, {
                method: "POST",
                mode: "cors",
                headers: {
                  "Content-Type": "application/x-www-form-urlencoded",
                },
                body: up.toString(),
              });
              if (resp.ok) {
                const j = await resp.json().catch(() => null);
                if (j && j.url) {
                  payProofUrl = j.url;
                }
              }
            } catch (_e) {
              /* ignore upload failure; will fallback to embedding base64 */
            }
          }
          // Terms agreement check (additional guard besides required attribute)
          if (!entries.agreeTerms) {
            alert("Please read and agree to the course terms.");
            btn.disabled = false;
            btn.innerHTML = original;
            return false;
          }
          // Special normalization
          entries.phone = normalizePhoneMY(entries.phone);
          if (entries.partnerPhone)
            entries.partnerPhone = normalizePhoneMY(entries.partnerPhone);
          entries.userAgent = navigator.userAgent || "";
          // Basic front-end validation
          if ((entries.name || "").length < 2) {
            alert("Name must be at least 2 characters.");
            btn.disabled = false;
            btn.innerHTML = original;
            return false;
          }
          if (!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(entries.email || "")) {
            alert("Please enter a valid email address.");
            btn.disabled = false;
            btn.innerHTML = original;
            return false;
          }
          if (!/^\+?\d[\d\s]{7,}$/.test(entries.phone || "")) {
            alert("Please enter a valid phone number (including area code).");
            btn.disabled = false;
            btn.innerHTML = original;
            return false;
          }
          if (
            entries.referralSource === "Deemcee" &&
            !entries.referralDeemcee
          ) {
            alert("Please select a Deemcee branch.");
            btn.disabled = false;
            btn.innerHTML = original;
            return false;
          }

          // 统一清理可疑公式输入字段
          [
            "name",
            "email",
            "occupation",
            "partnerName",
            "partnerIC",
            "partnerEmail",
            "partnerOccupation",
            "childAge",
            "partnerPhone",
            "phone",
            "icNumber",
            "address",
            "referralSource",
            "referralOther",
            "referralFriend",
            "referralDeemcee",
            "agreeTerms",
          ].forEach((k) => {
            if (entries[k]) entries[k] = sanitizeForSheet(entries[k]);
          });
          const dupKey =
            (entries.name || "") +
            "|" +
            (entries.email || "") +
            "|" +
            (entries.session || "");
          try {
            const stored = localStorage.getItem("regDup");
            if (stored) {
              const obj = JSON.parse(stored);
              const now = Date.now();
              if (obj.key === dupKey && now - obj.ts < DUP_KEY_TTL_MS) {
                alert("Submission already received, please try again later.");
                btn.disabled = false;
                btn.innerHTML = original;
                return false;
              }
            }
          } catch (_e) {}
          if (DEBUG) {
            console.log("[register] entries before send", entries);
          }
          // 若选择 Others，合并到 referralSource 便于表格查看
          if (entries.referralSource === "Others" && entries.referralOther) {
            entries.referralSource =
              entries.referralSource + " - " + entries.referralOther;
          }
          if (
            entries.referralSource === "Family & Friends" &&
            entries.referralFriend
          ) {
            entries.referralSource =
              entries.referralSource + " - " + entries.referralFriend;
          }
          if (entries.referralSource === "Deemcee" && entries.referralDeemcee) {
            entries.referralSource =
              entries.referralSource + " - " + entries.referralDeemcee;
          }

          // If there's a promo code, attempt to reserve it now (prevents race where someone else redeems simultaneously)
          const desiredPromo = (entries.promoCode || "").trim();
          console.log("Desired promo:", desiredPromo);
          if (desiredPromo) {
            try {
              console.log("Reserving promo code:", desiredPromo);
              const res = await promoReserve(
                desiredPromo,
                entries.email || entries.name || ""
              );
              if (!(res && res.ok && res.reservationId)) {
                alert(
                  "Promo code could not be reserved: " +
                    (res && res.error
                      ? res.error
                      : "Please try again later or use another code")
                );
                btn.disabled = false;
                btn.innerHTML = original;
                return false;
              }
              console.log("Promo reserved:", res);
              // store reservation id into hidden input and entries
              try {
                document.getElementById("promo-reservation-id").value =
                  res.reservationId;
              } catch (_e) {}
              entries.promoReservationId = res.reservationId;
              // apply promo client-side for display
              activePromo = {
                code: res.code,
                type: res.type,
                value: res.value,
                reservationId: res.reservationId,
                expiresAt: res.expiresAt,
              };
            } catch (err) {
              // Network or unexpected failure while reserving promo — do not proceed silently.
              console.error("promoReserve threw:", err);
              alert("Failed to reserve promo code, please try again later.");
              btn.disabled = false;
              btn.innerHTML = original;
              return false;
            }
          }

          Object.entries(entries).forEach(([k, v]) => {
            if (typeof v === "string") payload.append(k, v);
            else if (v instanceof Blob) {
              /* 跳过原始文件字段 */
            } else {
              payload.append(k, String(v ?? ""));
            }
          });

          // include reservation id explicitly
          if (entries.promoReservationId)
            payload.append("promoReservationId", entries.promoReservationId);

          // Add payment method to sheet
          if (entries.paymentMethod) {
            payload.append("paymentMethod", entries.paymentMethod);
          }
          // 期望 Sheets 中新增 "pay_proof" 列，记录可公开访问的凭证 URL（Apps Script 返回的 Drive 公开链接）
          if (payProofUrl) {
            payload.append("pay_proof", payProofUrl);
          }
          if (proofFile && proofFile.size && proofB64) {
            payload.append("paymentProofName", proofFile.name || "proof");
            payload.append(
              "paymentProofType",
              proofFile.type || "application/octet-stream"
            );
            payload.append("paymentProofSize", String(proofFile.size || 0));
            payload.append("paymentProofBase64", proofB64);
          }
          payload.append("submittedAt", new Date().toISOString());
          payload.append("source", window.location.href);

          if (desiredPromo) {
            payload.append("promoCode", desiredPromo);
          }

          // Route to specific worksheet tab
          payload.append("sheet", SHEET_TAB);
          if (ENDPOINT_SECRET) payload.append("secret", ENDPOINT_SECRET);

          // 首选：尝试 CORS JSON 接口
          fetch(GAS_ENDPOINT, {
            method: "POST",
            mode: "cors",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: payload.toString(),
          })
            .then((r) => {
              if (r.ok) return r.json().catch(() => ({ ok: true }));
              throw new Error("bad status");
            })
            .then((data) => {
              if (!data || data.ok !== false) {
                try {
                  if (window.fbq) {
                    const amtEl = document.getElementById("rf-payment-total");
                    const paid = parseFloat((amtEl && amtEl.value) || "0");

                    fbq("track", "Lead", {
                      value: isNaN(paid) ? 0 : paid,
                      currency: "MYR",
                      content_name: "Parents First 4Q Playlab",
                    });
                    fbq("track", "Purchase", {
                      value: isNaN(paid) ? 0 : paid,
                      currency: "MYR",
                      content_name: "Parents First 4Q Playlab",
                    });
                  }
                } catch (_) {}

                try {
                  const rid = document.getElementById(
                    "promo-reservation-id"
                  )?.value;
                  if (rid) localStorage.setItem("promoReservationId", rid);
                } catch (_e) {}

                // Stripe: choose link based on partner coming
                if (entries.paymentMethod === "stripe") {
                  var partner = (entries.partnerComing || "").toString().trim();
                  var payOriginal = (entries.payOriginalPrice || "")
                    .toString()
                    .trim();

                  if (desiredPromo) {
                    if (payOriginal === "no") {
                      if (partner === "是") {
                        window.location.href =
                          "https://buy.stripe.com/7sY14oa1R1f57GH7D3ejK07"; // with partner, original price
                      } else {
                        window.location.href =
                          "https://buy.stripe.com/eVqaEY0rh8HxaSTaPfejK08"; // without partner, original price
                      }
                    } else {
                      if (partner === "是") {
                        window.location.href =
                          "https://buy.stripe.com/5kQ14ob5Vf5V1ij6yZejK06"; // with partner, discounted
                      } else {
                        window.location.href =
                          "https://buy.stripe.com/eVq3cwb5V7Dtgdd0aBejK05"; // without partner, discounted
                      }
                    }
                  } else {
                    if (payOriginal === "no") {
                      if (partner === "是") {
                        window.location.href =
                          "https://buy.stripe.com/8x25kEc9Z9LB1ij6yZejK04"; // with partner, original price
                      } else {
                        window.location.href =
                          "https://buy.stripe.com/5kQaEY8XN1f51ijf5vejK03"; // without partner, original price
                      }
                    } else {
                      if (partner === "是") {
                        window.location.href =
                          "https://buy.stripe.com/00w5kEgqfcXNgdd0aBejK01"; // with partner, discounted
                      } else {
                        window.location.href =
                          "https://buy.stripe.com/fZufZi3Dt8Hx0ef3mNejK00"; // without partner, discounted
                      }
                    }
                  }
                } else {
                  window.location.href = "thankyou.html";
                }

                // Ensure partner fields are hidden and totals recalculated after reset
                try {
                  const ps = document.getElementById("rf-partner-coming");
                  if (ps) {
                    ps.value = "否";
                    ps.dispatchEvent(new Event("change"));
                  }
                  const orig = document.getElementById("pay-original-price");
                  if (orig) {
                    orig.value = "yes";
                    orig.dispatchEvent(new Event("change"));
                  }
                } catch (_e) {}
                try {
                  localStorage.setItem(
                    "regDup",
                    JSON.stringify({ key: dupKey, ts: Date.now() })
                  );
                } catch (_e) {}
                cooldownStarted = true;
                startSubmitCooldown(btn, original, 60);
              } else {
                throw new Error(data.message || "server error");
              }
            })
            .catch((err) => {
              if (DEBUG) {
                console.warn("[register] primary fetch failed", err);
              }
              // 回退：改用 no-cors（无法读取响应，只假设成功）
              return fetch(GAS_ENDPOINT, {
                method: "POST",
                mode: "no-cors",
                headers: {
                  "Content-Type": "application/x-www-form-urlencoded",
                },
                body: payload.toString(),
              })
                .then(() => {
                  try {
                    if (window.fbq) {
                      const amtEl = document.getElementById("rf-payment-total");
                      const paid = parseFloat((amtEl && amtEl.value) || "0");
                      fbq("track", "Lead", {
                        value: isNaN(paid) ? 0 : paid,
                        currency: "MYR",
                        content_name: "Parents First 4Q Playlab",
                      });
                      fbq("track", "Purchase", {
                        value: isNaN(paid) ? 0 : paid,
                        currency: "MYR",
                        content_name: "Parents First 4Q Playlab",
                      });
                    }
                  } catch (_) {}

                  form.reset();
                  // Stripe: choose link based on partner coming
                  if (entries.paymentMethod === "stripe") {
                    var partner = (entries.partnerComing || "")
                      .toString()
                      .trim();
                    var payOriginal = (entries.payOriginalPrice || "")
                      .toString()
                      .trim();
                    try {
                      const rid = document.getElementById(
                        "promo-reservation-id"
                      )?.value;
                      if (rid) localStorage.setItem("promoReservationId", rid);
                    } catch (_e) {}
                    if (desiredPromo) {
                      if (payOriginal === "no") {
                        if (partner === "是") {
                          window.location.href =
                            "https://buy.stripe.com/7sY14oa1R1f57GH7D3ejK07"; // with partner, original price
                        } else {
                          window.location.href =
                            "https://buy.stripe.com/eVqaEY0rh8HxaSTaPfejK08"; // without partner, original price
                        }
                      } else {
                        if (partner === "是") {
                          window.location.href =
                            "https://buy.stripe.com/5kQ14ob5Vf5V1ij6yZejK06"; // with partner, discounted
                        } else {
                          window.location.href =
                            "https://buy.stripe.com/eVq3cwb5V7Dtgdd0aBejK05"; // without partner, discounted
                        }
                      }
                    } else {
                      if (payOriginal === "no") {
                        if (partner === "是") {
                          window.location.href =
                            "https://buy.stripe.com/8x25kEc9Z9LB1ij6yZejK04"; // with partner, original price
                        } else {
                          window.location.href =
                            "https://buy.stripe.com/5kQaEY8XN1f51ijf5vejK03"; // without partner, original price
                        }
                      } else {
                        if (partner === "是") {
                          window.location.href =
                            "https://buy.stripe.com/00w5kEgqfcXNgdd0aBejK01"; // with partner, discounted
                        } else {
                          window.location.href =
                            "https://buy.stripe.com/fZufZi3Dt8Hx0ef3mNejK00"; // without partner, discounted
                        }
                      }
                    }
                  } else {
                    window.location.href = "thankyou.html";
                  }

                  // Ensure partner fields are hidden and totals recalculated after reset
                  try {
                    const ps = document.getElementById("rf-partner-coming");
                    if (ps) {
                      ps.value = "否";
                      ps.dispatchEvent(new Event("change"));
                    }
                  } catch (_e) {}
                  try {
                    localStorage.setItem(
                      "regDup",
                      JSON.stringify({ key: dupKey, ts: Date.now() })
                    );
                  } catch (_e) {}
                  cooldownStarted = true;
                  startSubmitCooldown(btn, original, 60);
                })
                .catch((err2) => {
                  if (DEBUG) {
                    console.error("[register] fallback fetch failed", err2);
                  }
                  alert(
                    "Submission failed, please try again later or contact us."
                  );
                });
            })
            .finally(() => {
              if (!cooldownStarted) {
                btn.disabled = false;
                btn.innerHTML = original;
              }
            });
          return false;
        };
      })();
      /*
         ================= Apps Script 服务器端示例 (Code.gs, 修正版本) =================
         // 1. 在 Apps Script 创建项目, 绑定一个 Google Sheet (或使用 openById)
         // 2. 粘贴此代码, 修改 SHEET_ID 与 SHARED_SECRET (可选)
         // 3. 部署 -> 新部署 -> Web 应用 -> 访问权限选择 "任何人" (需要允许匿名写入)
         
         function doPost(e){
           try {
             var SHEET_ID = '1IINLsh8yH1BcZdDD83O-3UBxXlVuSwfLLs69rVJ3TS8'; // TODO: 替换为你的 Sheet ID
             var SHARED_SECRET = 'bbcc$$#1234YYg43!!dsfdsf@33';             // 可选: 与前端 ENDPOINT_SECRET 匹配
         
             var isJson = e && e.postData && e.postData.type === 'application/json';
             var data = isJson ? JSON.parse(e.postData.contents || '{}') : (e && e.parameter) || {};
         
             if (SHARED_SECRET && data.secret !== SHARED_SECRET) {
               return jsonOut({ ok:false, error:'unauthorized' });
             }
         
             var ss = SpreadsheetApp.openById(SHEET_ID);
             var sheet = ss.getSheetByName('Responses') || ss.insertSheet('Responses');
             var headers = [
               'timestamp','name','phone','email','session','childAge','maritalStatus','occupation',
               'partnerComing','partnerName','partnerPhone','partnerEmail','partnerOccupation',
               'submittedAt','source','userAgent','ip'
             ];
             if (sheet.getLastRow() === 0) sheet.appendRow(headers);
         
             var ip = (e && e.requestHeaders && e.requestHeaders['x-forwarded-for']) || '';
             var row = [
               new Date(),
               data.name||'', data.phone||'', data.email||'', data.session||'', data.childAge||'', data.maritalStatus||'', data.occupation||'',
               data.partnerComing||'', data.partnerName||'', data.partnerPhone||'', data.partnerEmail||'', data.partnerOccupation||'',
               data.submittedAt||'', data.source||'', data.userAgent||'', ip
             ];
             sheet.appendRow(row);
         
             return jsonOut({ ok:true });
           } catch(err){
             return jsonOut({ ok:false, error:String(err) });
           }
         }
         
         function jsonOut(obj){
           return ContentService
             .createTextOutput(JSON.stringify(obj))
             .setMimeType(ContentService.MimeType.JSON);
         }
         
         // 如果你不需要读取响应 (前端使用 no-cors), 可以忽略 CORS 问题。
         // 若需要可读响应 + CORS，自定义 HtmlService 输出并添加 <meta http-equiv="Access-Control-Allow-Origin" content="*"> 等方式，或改由中转服务处理。
         =======================================================================
         */
    </script>
  </body>
</html>
